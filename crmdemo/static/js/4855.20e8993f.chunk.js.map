{"version":3,"file":"static/js/4855.20e8993f.chunk.js","mappings":"yQA4MA,UA9LkC,WAChC,IAAMA,EAA4B,CAAEC,GAAI,IACxCC,GAAwCC,EAAAA,EAAAA,UAEtC,CAACH,IAAaI,GAAAC,EAAAA,EAAAA,GAAAH,EAAA,GAFTI,EAAYF,EAAA,GAAEG,EAAeH,EAAA,GAGpCI,GAAwBL,EAAAA,EAAAA,UAASH,GAAYS,GAAAJ,EAAAA,EAAAA,GAAAG,EAAA,GAAtCE,EAAID,EAAA,GAAEE,EAAOF,EAAA,GACpBG,GAAwCT,EAAAA,EAAAA,UAAS,IAAGU,GAAAR,EAAAA,EAAAA,GAAAO,EAAA,GAA7CE,EAAYD,EAAA,GAAEE,EAAeF,EAAA,GACpCG,GAAwCb,EAAAA,EAAAA,WAAS,GAAMc,GAAAZ,EAAAA,EAAAA,GAAAW,EAAA,GAAhDE,EAAYD,EAAA,GAAEE,EAAeF,EAAA,GAC9BG,GAAWC,EAAAA,EAAAA,MACXC,GAAKC,EAAAA,EAAAA,QAAO,MACZC,GAAQD,EAAAA,EAAAA,QAAO,MACfE,GAA+BC,EAAAA,EAAAA,IACnC,SAACC,GAAgB,OAAKA,EAAMC,cAAcA,aAAa,GACvDC,EAAAA,IAEIC,GAAWC,EAAAA,EAAAA,MAEjBC,EAAAA,EAAAA,YAAU,WACRF,EAASG,EAAAA,GAAmBC,mBAC9B,GAAG,CAACJ,IAEJ,IAiBMK,EAAmB,WACvBhB,GAAgB,EAClB,EAOMiB,EAAU,eAAAC,GAAAC,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MAAG,SAAAC,IAAA,OAAAF,EAAAA,EAAAA,KAAAG,MAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,OACjBf,EAASG,EAAAA,GAAmBa,kBAAkBpC,EAAKT,KACnDkC,IACAxB,EAAQX,GACPwB,EAAMuB,QAAgBC,KAAK,CAC1BC,SAAU,UACVC,QAAS,aACTC,OAAQ,wBACRC,KAAM,MAERC,YAAW,WACTvB,EAASG,EAAAA,GAAmBC,mBAC9B,GAAG,KAAK,wBAAAS,EAAAW,OAAA,GAAAb,EAAA,KACT,kBAbe,OAAAJ,EAAAkB,MAAA,KAAAC,UAAA,KAeVC,GACJC,EAAAA,EAAAA,KAAA,OAAKC,UAAU,eAAcC,UAC3BC,EAAAA,EAAAA,MAAA,QAAMF,UAAU,oBAAmBC,SAAA,EACjCF,EAAAA,EAAAA,KAAA,KAAGC,UAAU,kBACbD,EAAAA,EAAAA,KAACI,EAAAA,EAAS,CACRC,KAAK,SACLC,QA1Bc,SAACC,GACpB3C,EAAGyB,QAAgBmB,QACpBnD,EAAgBkD,EAAEE,OAAOC,MAC3B,EAwBQC,YAAY,mBA6BdC,GACJT,EAAAA,EAAAA,MAAAU,EAAAA,SAAA,CAAAX,SAAA,EACEF,EAAAA,EAAAA,KAACc,EAAAA,EAAM,CACLC,MAAM,KACNC,KAAK,cACLf,UAAU,gBACVgB,QAASxC,KAEXuB,EAAAA,EAAAA,KAACc,EAAAA,EAAM,CACLC,MAAM,MACNC,KAAK,cACLf,UAAU,gBACVgB,QAASvC,OAKf,OACEyB,EAAAA,EAAAA,MAAAU,EAAAA,SAAA,CAAAX,SAAA,EACEF,EAAAA,EAAAA,KAACkB,EAAAA,EAAK,CAACC,IAAKrD,KACZqC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,YAAWC,SAAA,EACxBF,EAAAA,EAAAA,KAAA,OAAKC,UAAU,gBAAeC,UAC5BF,EAAAA,EAAAA,KAAA,MAAIC,UAAU,UAASC,SAAC,qBAE1BC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,iBAAgBC,SAAA,EAC7BF,EAAAA,EAAAA,KAACc,EAAAA,EAAM,CACLE,KAAK,aACLf,UAAU,qCACVmB,QAAQ,kBACRH,QA1GS,WACjBvD,EAAS,mBACX,IAyGU,QAEFsC,EAAAA,EAAAA,KAACc,EAAAA,EAAM,CACLE,KAAK,sBACLf,UAAU,qCACVmB,QAAQ,uBACRH,QA7GY,WACnBrD,EAAGyB,QAAgBgC,WACtB,WA+GIlB,EAAAA,EAAAA,MAACmB,EAAAA,EAAS,CACRH,IAAKvD,EACL2D,QAAQ,KACRb,MAAO3C,EACPyD,WAAS,EACTC,KAAM,GACNC,mBAAoB,CAAC,GAAI,GAAI,GAAI,KACjCC,cAAc,SACdC,UAAWhF,EACXiF,kBAAmB,SAACtB,GAAC,OAAK1D,EAAgB0D,EAAEG,MAAM,EAClDoB,kBAAgB,EAChB1E,aAAcA,EACd2C,OAAQA,EACRgC,eAAa,EAAA7B,SAAA,EAEbF,EAAAA,EAAAA,KAACgC,EAAAA,EAAM,CAACC,MAAM,OAAOlC,OAAO,OAAOmC,UAAQ,KAC3ClC,EAAAA,EAAAA,KAACgC,EAAAA,EAAM,CAACC,MAAM,cAAclC,OAAO,eAAemC,UAAQ,KAC1DlC,EAAAA,EAAAA,KAACgC,EAAAA,EAAM,CAACC,MAAM,aAAalC,OAAO,cAAcmC,UAAQ,KACxDlC,EAAAA,EAAAA,KAACgC,EAAAA,EAAM,CAACC,MAAM,SAASlC,OAAO,SAASmC,UAAQ,KAC/ClC,EAAAA,EAAAA,KAACgC,EAAAA,EAAM,CAACjC,OAAO,aAAaoC,KAlFT,SAACC,GACxB,OAAO,IAAIC,KAAKD,EAAQE,YAAYC,oBACtC,EAgF0DL,UAAQ,KAC5DlC,EAAAA,EAAAA,KAACgC,EAAAA,EAAM,CACLC,MAAM,uBACNlC,OAAO,cACPmC,UAAQ,KAEVlC,EAAAA,EAAAA,KAACgC,EAAAA,EAAM,CACLG,KArFmB,SAACC,GAC1B,OACEjC,EAAAA,EAAAA,MAAAU,EAAAA,SAAA,CAAAX,SAAA,EACEF,EAAAA,EAAAA,KAACc,EAAAA,EAAM,CACLE,KAAK,eACLf,UAAU,0CACVmB,QAAQ,OACRH,QAAS,kBAzDA,SAACmB,GAChB1E,EAAS,qBAAD8E,OAAsBJ,EAAQ7F,IACxC,CAuDuBkG,CAASL,EAAQ,KAElCpC,EAAAA,EAAAA,KAACc,EAAAA,EAAM,CACLE,KAAK,cACLf,UAAU,qCACVmB,QAAQ,SACRH,QAAS,kBA3DS,SAACmB,GACzBnF,EAAQmF,GACR3E,GAAgB,EAClB,CAwDuBiF,CAAkBN,EAAQ,MAIjD,EAqEQO,YAAY,EACZC,MAAO,CAAEC,SAAU,cAGvB7C,EAAAA,EAAAA,KAAA,KAAAE,SAAG,iDACHF,EAAAA,EAAAA,KAAC8C,EAAAA,EAAM,CACLC,QAASvF,EACToF,MAAO,CAAEI,MAAO,SAChBjD,OAAO,UACPkD,OAAK,EACLC,OAAQtC,EACRuC,OAAQ1E,EAAiByB,UAEzBC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,uBAAsBC,SAAA,EACnCF,EAAAA,EAAAA,KAAA,KACEC,UAAU,kCACV2C,MAAO,CAAEQ,SAAU,WAErBpD,EAAAA,EAAAA,KAAA,UAAAE,SAAQ,sDAKlB,C","sources":["pages/Opportunity/OpportunityList.tsx"],"sourcesContent":["import React, { useEffect, useRef, useState } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { Button } from \"primereact/button\";\r\nimport { Column } from \"primereact/column\";\r\nimport { DataTable, DataTableSelection } from \"primereact/datatable\";\r\nimport { Dialog } from \"primereact/dialog\";\r\nimport { InputText } from \"primereact/inputtext\";\r\nimport { Toast } from \"primereact/toast\";\r\nimport { shallowEqual } from \"react-redux\";\r\nimport { useAppDispatch, useAppSelector } from \"../../utilities/hooks\";\r\nimport { opportunityActions } from \"../../store/opportunity/opportunitySlice\";\r\nimport { IAppState } from \"../../models/appState\";\r\nimport { IOpportunity } from \"../../models/opportunity\";\r\n\r\nconst OpportunityList: React.FC = () => {\r\n  const defaultItem: IOpportunity = { id: \"\" };\r\n  const [selectedItem, setSelectedItem] = useState<\r\n    DataTableSelection<IOpportunity[]>\r\n  >([defaultItem]);\r\n  const [item, setItem] = useState(defaultItem);\r\n  const [globalFilter, setGlobalFilter] = useState(\"\");\r\n  const [deleteDialog, setDeleteDialog] = useState(false);\r\n  const navigate = useNavigate();\r\n  const dt = useRef(null);\r\n  const toast = useRef(null);\r\n  const opportunitys: IOpportunity[] = useAppSelector(\r\n    (state: IAppState) => state.opportunities.opportunities,\r\n    shallowEqual\r\n  );\r\n  const dispatch = useAppDispatch();\r\n\r\n  useEffect(() => {\r\n    dispatch(opportunityActions.getOpportunities());\r\n  }, [dispatch]);\r\n\r\n  const onAddClick = () => {\r\n    navigate(\"/opportunity/add\");\r\n  };\r\n\r\n  const onExportClick = () => {\r\n    (dt.current as any).exportCSV();\r\n  };\r\n\r\n  const editItem = (rowData: any) => {\r\n    navigate(`/opportunity/edit/${rowData.id}`);\r\n  };\r\n\r\n  const confirmDeleteItem = (rowData: IOpportunity) => {\r\n    setItem(rowData);\r\n    setDeleteDialog(true);\r\n  };\r\n\r\n  const hideDeleteDialog = () => {\r\n    setDeleteDialog(false);\r\n  };\r\n\r\n  const onSearchInput = (e: any) => {\r\n    (dt.current as any).reset();\r\n    setGlobalFilter(e.target.value);\r\n  };\r\n\r\n  const deleteItem = async () => {\r\n    dispatch(opportunityActions.deleteOpportunity(item.id));\r\n    hideDeleteDialog();\r\n    setItem(defaultItem);\r\n    (toast.current as any).show({\r\n      severity: \"success\",\r\n      summary: \"Successful\",\r\n      detail: \"Item has been deleted\",\r\n      life: 3000,\r\n    });\r\n    setTimeout(() => {\r\n      dispatch(opportunityActions.getOpportunities());\r\n    }, 300);\r\n  };\r\n\r\n  const header = (\r\n    <div className=\"table-header\">\r\n      <span className=\"p-input-icon-left\">\r\n        <i className=\"pi pi-search\" />\r\n        <InputText\r\n          type=\"search\"\r\n          onInput={onSearchInput}\r\n          placeholder=\"Search...\"\r\n        />\r\n      </span>\r\n    </div>\r\n  );\r\n\r\n  const dateBodyTemplate = (rowData: any): string => {\r\n    return new Date(rowData.dateClosed).toLocaleDateString();\r\n  };\r\n\r\n  const actionBodyTemplate = (rowData: any) => {\r\n    return (\r\n      <>\r\n        <Button\r\n          icon=\"pi pi-pencil\"\r\n          className=\"p-button-rounded p-button-outlined mr-2\"\r\n          tooltip=\"Edit\"\r\n          onClick={() => editItem(rowData)}\r\n        />\r\n        <Button\r\n          icon=\"pi pi-trash\"\r\n          className=\"p-button-rounded p-button-outlined\"\r\n          tooltip=\"Delete\"\r\n          onClick={() => confirmDeleteItem(rowData)}\r\n        />\r\n      </>\r\n    );\r\n  };\r\n\r\n  const deleteDialogFooter = (\r\n    <>\r\n      <Button\r\n        label=\"No\"\r\n        icon=\"pi pi-times\"\r\n        className=\"p-button-text\"\r\n        onClick={hideDeleteDialog}\r\n      />\r\n      <Button\r\n        label=\"Yes\"\r\n        icon=\"pi pi-check\"\r\n        className=\"p-button-text\"\r\n        onClick={deleteItem}\r\n      />\r\n    </>\r\n  );\r\n\r\n  return (\r\n    <>\r\n      <Toast ref={toast} />\r\n      <div className=\"grid pt-2\">\r\n        <div className=\"col text-left\">\r\n          <h3 className=\"caption\">Opportunities</h3>\r\n        </div>\r\n        <div className=\"col text-right\">\r\n          <Button\r\n            icon=\"pi pi-plus\"\r\n            className=\"p-button-rounded p-button-outlined\"\r\n            tooltip=\"Add Opportunity\"\r\n            onClick={onAddClick}\r\n          />\r\n          &nbsp;\r\n          <Button\r\n            icon=\"pi pi-external-link\"\r\n            className=\"p-button-rounded p-button-outlined\"\r\n            tooltip=\"Export Opportunities\"\r\n            onClick={onExportClick}\r\n          />\r\n        </div>\r\n      </div>\r\n      <DataTable\r\n        ref={dt}\r\n        dataKey=\"id\"\r\n        value={opportunitys}\r\n        paginator\r\n        rows={10}\r\n        rowsPerPageOptions={[10, 25, 50, 100]}\r\n        selectionMode=\"single\"\r\n        selection={selectedItem}\r\n        onSelectionChange={(e) => setSelectedItem(e.value)}\r\n        resizableColumns\r\n        globalFilter={globalFilter}\r\n        header={header}\r\n        showGridlines\r\n      >\r\n        <Column field=\"name\" header=\"Name\" sortable></Column>\r\n        <Column field=\"accountName\" header=\"Account Name\" sortable></Column>\r\n        <Column field=\"salesStage\" header=\"Sales Stage\" sortable></Column>\r\n        <Column field=\"amount\" header=\"Amount\" sortable></Column>\r\n        <Column header=\"Close Date\" body={dateBodyTemplate} sortable></Column>\r\n        <Column\r\n          field=\"assignedUserLastName\"\r\n          header=\"Assigned To\"\r\n          sortable\r\n        ></Column>\r\n        <Column\r\n          body={actionBodyTemplate}\r\n          exportable={false}\r\n          style={{ minWidth: \"8rem\" }}\r\n        ></Column>\r\n      </DataTable>\r\n      <p>* Table columns are sortable and resizable.</p>\r\n      <Dialog\r\n        visible={deleteDialog}\r\n        style={{ width: \"450px\" }}\r\n        header=\"Confirm\"\r\n        modal\r\n        footer={deleteDialogFooter}\r\n        onHide={hideDeleteDialog}\r\n      >\r\n        <div className=\"confirmation-content\">\r\n          <i\r\n            className=\"pi pi-exclamation-triangle mr-3\"\r\n            style={{ fontSize: \"2rem\" }}\r\n          />\r\n          <strong>Are you sure you want to delete this item?</strong>\r\n        </div>\r\n      </Dialog>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default OpportunityList;\r\n"],"names":["defaultItem","id","_useState","useState","_useState2","_slicedToArray","selectedItem","setSelectedItem","_useState3","_useState4","item","setItem","_useState5","_useState6","globalFilter","setGlobalFilter","_useState7","_useState8","deleteDialog","setDeleteDialog","navigate","useNavigate","dt","useRef","toast","opportunitys","useAppSelector","state","opportunities","shallowEqual","dispatch","useAppDispatch","useEffect","opportunityActions","getOpportunities","hideDeleteDialog","deleteItem","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_context","prev","next","deleteOpportunity","current","show","severity","summary","detail","life","setTimeout","stop","apply","arguments","header","_jsx","className","children","_jsxs","InputText","type","onInput","e","reset","target","value","placeholder","deleteDialogFooter","_Fragment","Button","label","icon","onClick","Toast","ref","tooltip","exportCSV","DataTable","dataKey","paginator","rows","rowsPerPageOptions","selectionMode","selection","onSelectionChange","resizableColumns","showGridlines","Column","field","sortable","body","rowData","Date","dateClosed","toLocaleDateString","concat","editItem","confirmDeleteItem","exportable","style","minWidth","Dialog","visible","width","modal","footer","onHide","fontSize"],"sourceRoot":""}