"use strict";(self.webpackChunkcrmdemo1=self.webpackChunkcrmdemo1||[]).push([[9388],{9388:function(e,i,s){s.r(i),s.d(i,{default:function(){return V}});var d=s(4165),n=s(5861),l=s(3433),r=s(4942),a=s(1413),c=s(9439),t=s(7313),o=s(8467),h=s(3499),u=s(5973),x=s(4885),m=s(3479),v=s(3103),j=s(4242),p=s(4755),g=s(7220),N=s(9094),f=s(244),b=s(364),C=s(9794),y=s(3709),S=s(1315),A=s(3877),Z=s(5375),P=s(6245),w=s(9856),I=s(439),F=s(5370),T=s(3740),D=s(2549),k=s(3063),L=s(8078),R=s(3646),E=s(6417),z=function(e){var i=function(e){var i;return(0,E.jsx)("div",{className:"text-right",children:null===e||void 0===e||null===(i=e.listPrice)||void 0===i?void 0:i.toFixed(2)})},s=function(e){return"".concat(null===e||void 0===e?void 0:e.discountType," ").concat(null===e||void 0===e?void 0:e.discount)},d=function(e){var i;return(0,E.jsx)("div",{className:"text-right",children:null===e||void 0===e||null===(i=e.total)||void 0===i?void 0:i.toFixed(2)})},n=function(e){var i,s,d;return(0,E.jsxs)("div",{className:"grid text-right",children:[(0,E.jsx)("div",{className:"col-7",children:"\xa0"}),(0,E.jsx)("div",{className:"col-5",children:(0,E.jsxs)("div",{className:"grid",children:[(0,E.jsx)("div",{className:"col-12",children:(0,E.jsxs)("div",{className:"grid",children:[(0,E.jsx)("div",{className:"col",children:"Items Total:"}),(0,E.jsx)("div",{className:"col",children:null===(i=e.subTotal)||void 0===i?void 0:i.toFixed(2)})]})}),(0,E.jsx)("div",{className:"col-12",children:(0,E.jsxs)("div",{className:"grid",children:[(0,E.jsx)("div",{className:"col",children:"Tax:"}),(0,E.jsx)("div",{className:"col",children:null===(s=e.taxTotal)||void 0===s?void 0:s.toFixed(2)})]})}),(0,E.jsx)("div",{className:"col-12",children:(0,E.jsxs)("div",{className:"grid",children:[(0,E.jsxs)("div",{className:"col",children:["Grand Total: (in ",e.currencyId,")"]}),(0,E.jsx)("div",{className:"col",children:null===(d=e.total)||void 0===d?void 0:d.toFixed(2)})]})})]})})]})};return(0,E.jsx)(E.Fragment,{children:function(){var l;if(""===e.item.id)return null;var r=(0,a.Z)({},e.item);if(e.vendors){var c=e.vendors.find((function(e){return e.id===r.vendorId}));c&&(r.vendorId=c.name)}if(e.currencies){var t=e.currencies.find((function(e){return e.id===r.currencyId}));t&&(r.currencyId=t.symbol)}return e.products&&e.item.items&&(r.items=e.item.items.map((function(i){var s=(0,a.Z)({},i),d=e.products.find((function(e){return e.id===i.productId}));return d&&(s.productId=d.name),s}))),(0,E.jsxs)("div",{className:"grid p-5",children:[(0,E.jsx)("div",{className:"col-12",children:(0,E.jsx)("h3",{children:"Purchase Order"})}),(0,E.jsx)("div",{className:"col-12",children:(0,E.jsxs)("div",{className:"grid",children:[(0,E.jsx)("div",{className:"col",children:(0,E.jsx)("label",{htmlFor:"Subject",children:"Subject:"})}),(0,E.jsx)("div",{className:"col",children:r.subject}),(0,E.jsx)("div",{className:"col-fixed p-fixed hidden-xs",children:"\xa0"}),(0,E.jsx)("div",{className:"col",children:(0,E.jsx)("label",{htmlFor:"Opportunity",children:"Vendor Name:"})}),(0,E.jsx)("div",{className:"col",children:r.vendorId})]})}),(0,E.jsx)("div",{className:"col-12",children:(0,E.jsxs)("div",{className:"grid",children:[(0,E.jsx)("div",{className:"col",children:(0,E.jsx)("label",{htmlFor:"CustomerNo",children:"Issued Date:"})}),(0,E.jsx)("div",{className:"col",children:(new Date).toLocaleDateString()}),(0,E.jsx)("div",{className:"col-fixed p-fixed hidden-xs",children:"\xa0"}),(0,E.jsx)("div",{className:"col",children:(0,E.jsx)("label",{htmlFor:"Account",children:"Due Date:"})}),(0,E.jsx)("div",{className:"col",children:null===(l=(0,L.YM)(r.dueDate))||void 0===l?void 0:l.toLocaleDateString()})]})}),(0,E.jsx)("div",{className:"col-12",children:(0,E.jsxs)("div",{className:"grid",children:[(0,E.jsx)("div",{className:"col",children:(0,E.jsx)("label",{htmlFor:"PurchaseOrder",children:"Billing Address:"})}),(0,E.jsx)("div",{className:"col",children:"".concat(r.billingAddressStreet," ").concat(r.billingAddressCity,", ").concat(r.billingAddressState," ").concat(r.billingAddressPostalcode," ").concat(r.billingAddressCountry)}),(0,E.jsx)("div",{className:"col-fixed p-fixed hidden-xs",children:"\xa0"}),(0,E.jsx)("div",{className:"col",children:(0,E.jsx)("label",{htmlFor:"Contact",children:"Shipping Address:"})}),(0,E.jsx)("div",{className:"col",children:"".concat(r.shippingAddressStreet," ").concat(r.shippingAddressCity,", ").concat(r.shippingAddressState," ").concat(r.shippingAddressPostalcode," ").concat(r.shippingAddressCountry)})]})}),(0,E.jsx)("div",{className:"col-12",children:(0,E.jsxs)(v.w,{value:r.items,showGridlines:!0,footer:n(r),children:[(0,E.jsx)(m.s,{field:"productId",header:"Product"}),(0,E.jsx)(m.s,{field:"quantity",header:"Quantity"}),(0,E.jsx)(m.s,{field:"listPrice",header:"Selling Price",body:i}),(0,E.jsx)(m.s,{field:"discountType",header:"Discount",body:s}),(0,E.jsx)(m.s,{field:"total",header:"Total",body:d})]})}),(0,E.jsx)("div",{className:"col-12",children:(0,E.jsx)("h3",{children:"Description"})}),(0,E.jsx)("div",{className:"col-12",children:r.description}),(0,E.jsx)("div",{className:"col-12",children:(0,E.jsx)("h3",{children:"Terms & Conditions"})}),(0,E.jsx)("div",{className:"col-12",children:r.termsConditions})]})}()})},B=s(3295),V=function(){var e,i,s,V="/purchaseorders",q=(0,o.s0)(),O=(0,t.useState)("Create"),U=(0,c.Z)(O,2),$=U[0],G=U[1],M=(0,t.useState)({id:"",subject:"",vendorId:"",vendorName:"",requisitionNo:"",trackingNo:"",contactId:"",dueDate:"",carrier:"",salesCommission:0,exciseDuty:0,termsConditions:"",status:"",currencyId:"",subTotal:0,taxTotal:0,total:0,assignedUserId:"",assignedUserLastName:"",billingAddressStreet:"",billingAddressCity:"",billingAddressState:"",billingAddressPostalcode:"",billingAddressCountry:"",shippingAddressStreet:"",shippingAddressCity:"",shippingAddressState:"",shippingAddressPostalcode:"",shippingAddressCountry:"",description:"",items:[]}),Y=(0,c.Z)(M,2),H=Y[0],W=Y[1],_=(0,t.useState)(!1),Q=(0,c.Z)(_,2),J=Q[0],K=Q[1],X=(0,t.useState)(!1),ee=(0,c.Z)(X,2),ie=ee[0],se=ee[1],de=(0,t.useState)({}),ne=(0,c.Z)(de,2),le=ne[0],re=ne[1],ae=(0,t.useState)(!1),ce=(0,c.Z)(ae,2),te=ce[0],oe=ce[1],he=(0,t.useState)(""),ue=(0,c.Z)(he,2),xe=ue[0],me=ue[1],ve=(0,t.useState)([]),je=(0,c.Z)(ve,2),pe=je[0],ge=je[1],Ne=(0,o.UO)(),fe=(0,t.useRef)(!0),be=(0,t.useRef)(null),Ce=(0,S.C)((function(e){return[e.purchaseOrders.purchaseOrder,e.purchaseOrders.isFetching,e.purchaseOrders.isError,e.contacts.contacts,e.currencies.currencies,e.products.products,e.purchaseOrders.purchaseOrders,e.users.users,e.users.isProfile,e.users.profile,e.vendors.vendors]}),y.wU),ye=(0,c.Z)(Ce,11),Se=ye[0],Ae=ye[1],Ze=ye[2],Pe=ye[3],we=ye[4],Ie=ye[5],Fe=ye[6],Te=ye[7],De=ye[8],ke=ye[9],Le=ye[10],Re=(0,S.T)();(0,t.useEffect)((function(){if(fe.current)if(fe.current=!1,Re(A.S8.getContacts()),Re(Z.gC.getCurrencies()),Re(P.Yg.getOpportunities()),Re(w.Jh.getProducts()),Re(F.hI.getUsers()),Re(T.Ne.getVendors()),"edit"===Ne.mode){G("Edit");var e=Ne.id;e&&Re(I.lV.getPurchaseOrderById(e))}else W((0,a.Z)((0,a.Z)({},H),{},{termsConditions:k._1}))}),[]),(0,t.useEffect)((function(){"edit"!==Ne.mode&&De&&ke&&ke.currencyId&&""===H.currencyId&&ke.currencyId!==H.currencyId&&W((0,a.Z)((0,a.Z)({},H),{},{currencyId:ke.currencyId}))}),[Ne,De,ke,H]),(0,t.useEffect)((function(){"edit"!==Ne.mode||H.id===(null===Se||void 0===Se?void 0:Se.id)||Ae||Ze||W(Se)}),[Ne,H,Se,Ae,Ze]),(0,t.useEffect)((function(){if(Ie&&Ie.length>0){var e=Ie.filter((function(e){return!!e.active}));e.length>0&&ge(e)}}),[Ie]);var Ee=(0,t.useCallback)((function(e){var i=!0;return 0===H.id.length?Fe.find((function(i){var s;return(null===(s=i.subject)||void 0===s?void 0:s.toLowerCase())===(null===e||void 0===e?void 0:e.toLowerCase())}))&&(i=!1):Fe.find((function(i){var s;return(null===(s=i.subject)||void 0===s?void 0:s.toLowerCase())===(null===e||void 0===e?void 0:e.toLowerCase())&&i.id!==H.id}))&&(i=!1),i}),[H.id,Fe]);(0,t.useEffect)((function(){J&&se((H.subject||"").trim().length>0&&Ee(H.subject||"")&&(H.currencyId||"").trim().length>0)}),[J,H,Ee]);var ze=function(e){K(!0);var i=e.target,s=i.name,d=i.value;if("dueDate"===s)W((0,a.Z)((0,a.Z)({},H),{},(0,r.Z)({},s,(0,L.xN)(d))));else if("vendorId"===s){var n,l=Le.find((function(e){return e.id===d}));if(l)W((0,a.Z)((0,a.Z)({},H),{},(n={},(0,r.Z)(n,s,d),(0,r.Z)(n,"vendorName",l.name),n)))}else if("currencyId"===s)W((0,a.Z)((0,a.Z)({},H),{},(0,r.Z)({},s,d),function(e){for(var i=0,s=0,d=H.currencyId?H.currencyId:"",n=H.items||[],l=[],r=0;r<n.length;r++){var c=(0,a.Z)({},n[r]);c.purchaseCost=(0,L.Nh)(d,e,c.purchaseCost,we),c.listPrice=(0,L.Nh)(d,e,c.listPrice,we),"$"===c.discountType&&(c.discount=(0,L.Nh)(d,e,c.discount||0,we)),c.total=(0,L.Nh)(d,e,c.total,we),c.tax=(0,L.Nh)(d,e,c.tax,we),l.push(c),i+=c.total,s=c.tax}return{subTotal:i,taxTotal:s,total:i+s,items:l}}(e.target.value)));else if("assignedUserId"===s){var c,t=Te.find((function(e){return e.id===d}));if(t)W((0,a.Z)((0,a.Z)({},H),{},(c={},(0,r.Z)(c,s,d),(0,r.Z)(c,"assignedUserLastName",t.lastName),c)))}else W((0,a.Z)((0,a.Z)({},H),{},(0,r.Z)({},s,d)));if("subject"===s){var o=Ee(d);re((0,a.Z)((0,a.Z)({},le),{},(0,r.Z)({subjectInvalid:!o},s,!d||0===d.toString().trim().length)))}},Be=function(){K(!0),W((0,a.Z)((0,a.Z)({},H),{},{shippingAddressStreet:H.billingAddressStreet,shippingAddressCity:H.billingAddressCity,shippingAddressState:H.billingAddressState,shippingAddressPostalcode:H.billingAddressPostalcode,shippingAddressCountry:H.billingAddressCountry}))},Ve=function(){K(!0),W((0,a.Z)((0,a.Z)({},H),{},{billingAddressStreet:H.shippingAddressStreet,billingAddressCity:H.shippingAddressCity,billingAddressState:H.shippingAddressState,billingAddressPostalcode:H.shippingAddressPostalcode,billingAddressCountry:H.shippingAddressCountry}))},qe=function(e){return(0,E.jsx)(p.L,{value:e.value,options:pe,optionLabel:"name",optionValue:"id",onChange:function(i){return function(e,i){var s=pe.find((function(e){return e.id===i.value}));if(s&&H){var d=e.rowData,n=e.rowIndex;d.listPrice=s.unitPrice;var r=(0,l.Z)(H.items||[]);r[n]=d,W((0,a.Z)((0,a.Z)({},H),{},{items:r}))}e.editorCallback(i.value)}(e,i)},placeholder:"Select a Product",itemTemplate:function(e){return(0,E.jsx)("span",{children:e.name})}})},Oe=function(e){var i,s;switch(e.value){case"%":s="% Price";break;case"$":s="Direct Price Reduction";break;default:s="Zero Discount"}return(0,E.jsxs)("div",{className:"field-checkbox m-0",children:[(0,E.jsx)(C.x,{value:s,options:R.$v,optionValue:"value",onChange:function(i){return function(e,i){var s;switch(i.value){case"% Price":s="%";break;case"Direct Price Reduction":s="$";break;default:s=""}e.editorCallback(s)}(e,i)},tooltip:s}),"\xa0","Zero Discount"!==s&&(0,E.jsx)(f.R,{value:null===(i=e.rowData)||void 0===i?void 0:i.discount,onValueChange:function(i){return function(e,i){var s=e.rowData,d=e.rowIndex;s.discount=i;var n=(0,l.Z)(H.items||[]);n[d]=s,W((0,a.Z)((0,a.Z)({},H),{},{items:n}))}(e,i.value)},size:9})]})},Ue=function(e){return(0,E.jsx)(f.R,{value:e.value,onValueChange:function(i){return e.editorCallback(i.value)},size:9})},$e=function(e){me(e.id),oe(!0)},Ge=function(){oe(!1)},Me=function(){var e=(0,n.Z)((0,d.Z)().mark((function e(){var i,s,n,l,r,c,t,o,h;return(0,d.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:xe&&(s=null===(i=H.items)||void 0===i?void 0:i.filter((function(e){return e.id!==xe})))&&(K(!0),l=0,r=0,(c=null===(n=H.items)||void 0===n?void 0:n.find((function(e){return e.id===xe})))&&(l=c.total||0,r=c.tax||0),t=(H.subTotal||0)-l,o=(H.taxTotal||0)-r,h=t+o,W((0,a.Z)((0,a.Z)({},H),{},{subTotal:t,taxTotal:o,total:h,items:s}))),Ge(),me("");case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ye=(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(h.z,{label:"No",icon:"pi pi-times",className:"p-button-text",onClick:Ge}),(0,E.jsx)(h.z,{label:"Yes",icon:"pi pi-check",className:"p-button-text",onClick:Me})]}),He=(0,E.jsxs)("div",{className:"grid text-right",children:[(0,E.jsx)("div",{className:"col-9",children:"\xa0"}),(0,E.jsx)("div",{className:"col-3",children:(0,E.jsxs)("div",{className:"grid",children:[(0,E.jsx)("div",{className:"col-12",children:(0,E.jsxs)("div",{className:"grid",children:[(0,E.jsx)("div",{className:"col",children:"Items Total:"}),(0,E.jsx)("div",{className:"col",children:null===(e=H.subTotal)||void 0===e?void 0:e.toFixed(2)})]})}),(0,E.jsx)("div",{className:"col-12",children:(0,E.jsxs)("div",{className:"grid",children:[(0,E.jsx)("div",{className:"col",children:"Tax:"}),(0,E.jsx)("div",{className:"col",children:null===(i=H.taxTotal)||void 0===i?void 0:i.toFixed(2)})]})}),(0,E.jsx)("div",{className:"col-12",children:(0,E.jsxs)("div",{className:"grid",children:[(0,E.jsx)("div",{className:"col",children:"Grand Total:"}),(0,E.jsx)("div",{className:"col",children:null===(s=H.total)||void 0===s?void 0:s.toFixed(2)})]})})]})})]}),We=function(){var e=(0,n.Z)((0,d.Z)().mark((function e(){return(0,d.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"Edit"!==$&&(H.id=(0,D.Z)()),Re(I.lV.updatePurchaseOrder(H)),setTimeout((function(){Re(I.lV.getPurchaseOrders())}),300),q(V);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),_e=function(){var e=(0,n.Z)((0,d.Z)().mark((function e(){return(0,d.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:q(V);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Qe=(0,B.useReactToPrint)({content:function(){return be.current}});return(0,E.jsxs)(E.Fragment,{children:[(0,E.jsxs)("div",{children:[(0,E.jsxs)("h3",{className:"caption",children:["Purchase Order: ",$]}),(0,E.jsx)("div",{className:"grid",children:(0,E.jsxs)("div",{className:"col-12",children:[(0,E.jsx)("span",{className:"field-required",children:"*"})," - Required field"]})}),(0,E.jsxs)(u.Z,{children:[(0,E.jsx)("div",{className:"grid",children:(0,E.jsx)("div",{className:"col-12",children:(0,E.jsx)("h3",{children:"Purchase Order"})})}),(0,E.jsxs)("div",{className:"grid",children:[(0,E.jsx)("div",{className:"col-12",children:(0,E.jsxs)("div",{className:"grid",children:[(0,E.jsx)("div",{className:"col",children:(0,E.jsxs)("label",{htmlFor:"Subject",children:["Subject ",(0,E.jsx)("span",{className:"field-required",children:"*"})]})}),(0,E.jsxs)("div",{className:"col",children:[(0,E.jsx)(g.o,{id:"Subject",name:"subject",maxLength:100,placeholder:"Subject",value:H.subject,onChange:ze}),(null===le||void 0===le?void 0:le.subject)&&(0,E.jsx)(b.v,{severity:"error",text:"Subject is required."}),(null===le||void 0===le?void 0:le.subjectInvalid)&&(0,E.jsx)(b.v,{severity:"error",text:"Subject already exists."})]}),(0,E.jsx)("div",{className:"col-fixed p-fixed hidden-xs",children:"\xa0"}),(0,E.jsx)("div",{className:"col",children:(0,E.jsx)("label",{htmlFor:"Vendor",children:"Vendor"})}),(0,E.jsx)("div",{className:"col",children:(0,E.jsx)("div",{className:"p-fixed-switch",children:(0,E.jsx)(p.L,{id:"Vendor",name:"vendorId",options:Le,optionLabel:"name",optionValue:"id",value:H.vendorId,onChange:ze,className:"p-combobox"})})})]})}),(0,E.jsx)("div",{className:"col-12",children:(0,E.jsxs)("div",{className:"grid",children:[(0,E.jsx)("div",{className:"col",children:(0,E.jsx)("label",{htmlFor:"TrackingNo",children:"Tracking No"})}),(0,E.jsx)("div",{className:"col",children:(0,E.jsx)(g.o,{id:"TrackingNo",name:"trackingNo",maxLength:100,value:H.trackingNo,onChange:ze})}),(0,E.jsx)("div",{className:"col-fixed p-fixed hidden-xs",children:"\xa0"}),(0,E.jsx)("div",{className:"col",children:(0,E.jsx)("label",{htmlFor:"RequisitionNo",children:"Requisition No"})}),(0,E.jsx)("div",{className:"col",children:(0,E.jsx)(g.o,{id:"RequisitionNo",name:"requisitionNo",maxLength:100,value:H.requisitionNo,onChange:ze})})]})}),(0,E.jsx)("div",{className:"col-12",children:(0,E.jsxs)("div",{className:"grid",children:[(0,E.jsx)("div",{className:"col",children:(0,E.jsx)("label",{htmlFor:"DueDate",children:"Due Date"})}),(0,E.jsx)("div",{className:"col",children:(0,E.jsx)(x.f,{id:"DueDate",name:"dueDate",value:(0,L.YM)(H.dueDate),onChange:ze,showButtonBar:!0,showIcon:!0,className:"p-combobox"})}),(0,E.jsx)("div",{className:"col-fixed p-fixed hidden-xs",children:"\xa0"}),(0,E.jsx)("div",{className:"col",children:(0,E.jsx)("label",{htmlFor:"Contact",children:"Contact"})}),(0,E.jsx)("div",{className:"col",children:(0,E.jsx)(p.L,{id:"Contact",name:"contactId",options:Pe,optionLabel:"lastName",optionValue:"id",value:H.contactId,onChange:ze,className:"p-combobox"})})]})}),(0,E.jsx)("div",{className:"col-12",children:(0,E.jsxs)("div",{className:"grid",children:[(0,E.jsx)("div",{className:"col",children:(0,E.jsx)("label",{htmlFor:"SalesCommission",children:"Sales Commission"})}),(0,E.jsx)("div",{className:"col",children:(0,E.jsx)(f.R,{id:"SalesCommission",name:"salesCommission",value:H.salesCommission,onValueChange:ze})}),(0,E.jsx)("div",{className:"col-fixed p-fixed hidden-xs",children:"\xa0"}),(0,E.jsx)("div",{className:"col",children:(0,E.jsx)("label",{htmlFor:"Carrier",children:"Carrier"})}),(0,E.jsx)("div",{className:"col",children:(0,E.jsx)(p.L,{id:"Carrier",name:"carrier",options:["FedEx","UPS","USPS","DHL","BlueDart"],value:H.carrier,onChange:ze,className:"p-combobox"})})]})}),(0,E.jsx)("div",{className:"col-12",children:(0,E.jsxs)("div",{className:"grid",children:[(0,E.jsx)("div",{className:"col",children:(0,E.jsx)("label",{htmlFor:"ExciseDuty",children:"Excise Duty"})}),(0,E.jsx)("div",{className:"col",children:(0,E.jsx)(f.R,{id:"ExciseDuty",name:"exciseDuty",value:H.exciseDuty,onValueChange:ze})}),(0,E.jsx)("div",{className:"col-fixed p-fixed hidden-xs",children:"\xa0"}),(0,E.jsx)("div",{className:"col",children:(0,E.jsx)("label",{htmlFor:"Status",children:"Status"})}),(0,E.jsx)("div",{className:"col",children:(0,E.jsx)(p.L,{id:"Status",name:"status",options:R.Gh,value:H.status,onChange:ze,className:"p-combobox"})})]})}),(0,E.jsx)("div",{className:"col-12",children:(0,E.jsxs)("div",{className:"grid",children:[(0,E.jsx)("div",{className:"col",children:(0,E.jsxs)("label",{htmlFor:"Currency",children:["Currency ",(0,E.jsx)("span",{className:"field-required",children:"*"})]})}),(0,E.jsxs)("div",{className:"col",children:[(0,E.jsx)(p.L,{id:"Currency",name:"currencyId",options:we,optionLabel:"name",optionValue:"id",value:H.currencyId,onChange:ze,className:"p-combobox"}),(null===le||void 0===le?void 0:le.currencyId)&&(0,E.jsx)(b.v,{severity:"error",text:"Currency is required."})]}),(0,E.jsx)("div",{className:"col-fixed p-fixed hidden-xs",children:"\xa0"}),(0,E.jsx)("div",{className:"col",children:(0,E.jsx)("label",{htmlFor:"AssignedTo",children:"Assigned To"})}),(0,E.jsx)("div",{className:"col",children:(0,E.jsx)(p.L,{id:"AssignedTo",name:"assignedUserId",options:Te,optionLabel:"lastName",optionValue:"id",value:H.assignedUserId,onChange:ze,className:"p-combobox"})})]})})]})]}),(0,E.jsx)("div",{className:"grid",children:(0,E.jsx)("div",{className:"col-12",children:"\xa0"})}),(0,E.jsxs)(u.Z,{children:[(0,E.jsx)("div",{className:"grid",children:(0,E.jsx)("div",{className:"col-12",children:(0,E.jsx)("h3",{children:"Address"})})}),(0,E.jsxs)("div",{className:"grid",children:[(0,E.jsx)("div",{className:"col",children:(0,E.jsx)("h4",{children:"Billing Address"})}),(0,E.jsx)("div",{className:"col-fixed p-fixed-10 hidden-xs",children:"\xa0"}),(0,E.jsx)("div",{className:"col hidden-xs",children:(0,E.jsx)("h4",{children:"Shipping Address"})})]}),(0,E.jsxs)("div",{className:"grid",children:[(0,E.jsx)("div",{className:"col-12",children:(0,E.jsxs)("div",{className:"grid",children:[(0,E.jsx)("div",{className:"col",children:(0,E.jsx)("label",{htmlFor:"BillingStreet",children:"Street"})}),(0,E.jsx)("div",{className:"col",children:(0,E.jsx)(g.o,{id:"BillingStreet",name:"billingAddressStreet",maxLength:150,value:H.billingAddressStreet,onChange:ze})}),(0,E.jsx)("div",{className:"col-fixed p-fixed-10 hidden-xs",children:"\xa0"}),(0,E.jsx)("div",{className:"col hidden-xs",children:(0,E.jsx)("label",{htmlFor:"ShippingStreet1",children:"Street"})}),(0,E.jsx)("div",{className:"col hidden-xs",children:(0,E.jsx)(g.o,{id:"ShippingStreet1",name:"shippingAddressStreet",maxLength:150,value:H.shippingAddressStreet,onChange:ze})})]})}),(0,E.jsx)("div",{className:"col-12",children:(0,E.jsxs)("div",{className:"grid",children:[(0,E.jsx)("div",{className:"col",children:(0,E.jsx)("label",{htmlFor:"BillingCity",children:"City"})}),(0,E.jsx)("div",{className:"col",children:(0,E.jsx)(g.o,{id:"BillingCity",name:"billingAddressCity",maxLength:100,value:H.billingAddressCity,onChange:ze})}),(0,E.jsx)("div",{className:"col-fixed p-fixed-10 hidden-xs",children:(0,E.jsx)(h.z,{icon:"pi pi-arrow-circle-right",className:"p-button-rounded p-button-text p-button-lg",tooltip:"Copy Billing Address",onClick:Be})}),(0,E.jsx)("div",{className:"col hidden-xs",children:(0,E.jsx)("label",{htmlFor:"ShippingCity1",children:"City"})}),(0,E.jsx)("div",{className:"col hidden-xs",children:(0,E.jsx)(g.o,{id:"ShippingCity1",name:"shippingAddressCity",maxLength:100,value:H.shippingAddressCity,onChange:ze})})]})}),(0,E.jsx)("div",{className:"col",children:(0,E.jsxs)("div",{className:"grid",children:[(0,E.jsx)("div",{className:"col",children:(0,E.jsx)("label",{htmlFor:"BillingState",children:"State"})}),(0,E.jsx)("div",{className:"col",children:(0,E.jsx)(g.o,{id:"BillingState",name:"billingAddressState",maxLength:100,value:H.billingAddressState,onChange:ze})}),(0,E.jsx)("div",{className:"col-fixed p-fixed-10 hidden-xs",children:"\xa0"}),(0,E.jsx)("div",{className:"col hidden-xs",children:(0,E.jsx)("label",{htmlFor:"ShippingState1",children:"State"})}),(0,E.jsx)("div",{className:"col hidden-xs",children:(0,E.jsx)(g.o,{id:"ShippingState1",name:"shippingAddressState",maxLength:100,value:H.shippingAddressState,onChange:ze})})]})}),(0,E.jsx)("div",{className:"col-12",children:(0,E.jsxs)("div",{className:"grid",children:[(0,E.jsx)("div",{className:"col",children:(0,E.jsx)("label",{htmlFor:"BillingPostalCode",children:"Postal Code"})}),(0,E.jsx)("div",{className:"col",children:(0,E.jsx)(g.o,{id:"BillingPostalCode",name:"billingAddressPostalcode",maxLength:20,value:H.billingAddressPostalcode,onChange:ze})}),(0,E.jsx)("div",{className:"col-fixed p-fixed-10 hidden-xs",children:(0,E.jsx)(h.z,{icon:"pi pi-arrow-circle-left",className:"p-button-rounded p-button-text p-button-lg",tooltip:"Copy Shipping Address",onClick:Ve})}),(0,E.jsx)("div",{className:"col hidden-xs",children:(0,E.jsx)("label",{htmlFor:"ShippingPostalCode1",children:"Postal Code"})}),(0,E.jsx)("div",{className:"col hidden-xs",children:(0,E.jsx)(g.o,{id:"ShippingPostalCode1",name:"shippingAddressPostalcode",type:"text",maxLength:20,value:H.shippingAddressPostalcode,onChange:ze})})]})}),(0,E.jsx)("div",{className:"col-12",children:(0,E.jsxs)("div",{className:"grid",children:[(0,E.jsx)("div",{className:"col",children:(0,E.jsx)("label",{htmlFor:"BillingCountry",children:"Country"})}),(0,E.jsx)("div",{className:"col",children:(0,E.jsx)(g.o,{id:"BillingCountry",name:"billingAddressCountry",maxLength:255,value:H.billingAddressCountry,onChange:ze})}),(0,E.jsx)("div",{className:"col-fixed p-fixed-10 hidden-xs",children:"\xa0"}),(0,E.jsx)("div",{className:"col hidden-xs",children:(0,E.jsx)("label",{htmlFor:"ShippingCountry1",children:"Country"})}),(0,E.jsx)("div",{className:"col hidden-xs",children:(0,E.jsx)(g.o,{id:"ShippingCountry1",name:"shippingAddressCountry",maxLength:255,value:H.shippingAddressCountry,onChange:ze})})]})}),(0,E.jsx)("div",{className:"col-12 hidden-sm hidden-md hidden-lg",children:(0,E.jsxs)("div",{className:"grid",children:[(0,E.jsx)("div",{className:"col",children:(0,E.jsx)(h.z,{icon:"pi pi-arrow-circle-down",className:"p-button-rounded p-button-text p-button-lg",tooltip:"Copy Billing Address",onClick:Be})}),(0,E.jsx)("div",{className:"col",children:(0,E.jsx)(h.z,{icon:"pi pi-arrow-circle-up",className:"p-button-rounded p-button-text p-button-lg",tooltip:"Copy Shipping Address",onClick:Ve})})]})}),(0,E.jsx)("div",{className:"col-12 hidden-sm hidden-md hidden-lg",children:(0,E.jsx)("h4",{children:"Shipping Address"})}),(0,E.jsx)("div",{className:"col-12 hidden-sm hidden-md hidden-lg",children:(0,E.jsxs)("div",{className:"grid",children:[(0,E.jsx)("div",{className:"col-12",children:(0,E.jsx)("label",{htmlFor:"ShippingStreet2",children:"Street"})}),(0,E.jsx)("div",{className:"col-12",children:(0,E.jsx)(g.o,{id:"ShippingStreet2",name:"shippingAddressStreet",maxLength:150,value:H.shippingAddressStreet,onChange:ze})})]})}),(0,E.jsx)("div",{className:"col-12 hidden-sm hidden-md hidden-lg",children:(0,E.jsxs)("div",{className:"grid",children:[(0,E.jsx)("div",{className:"col-12",children:(0,E.jsx)("label",{htmlFor:"ShippingCity2",children:"City"})}),(0,E.jsx)("div",{className:"col-12",children:(0,E.jsx)(g.o,{id:"ShippingCity2",name:"shippingAddressCity",maxLength:100,value:H.shippingAddressCity,onChange:ze})})]})}),(0,E.jsx)("div",{className:"col-12 hidden-sm hidden-md hidden-lg",children:(0,E.jsxs)("div",{className:"grid",children:[(0,E.jsx)("div",{className:"col-12",children:(0,E.jsx)("label",{htmlFor:"ShippingState2",children:"State"})}),(0,E.jsx)("div",{className:"col-12",children:(0,E.jsx)(g.o,{id:"ShippingState2",name:"shippingAddressState",maxLength:100,value:H.shippingAddressState,onChange:ze})})]})}),(0,E.jsx)("div",{className:"col-12 hidden-sm hidden-md hidden-lg",children:(0,E.jsxs)("div",{className:"grid",children:[(0,E.jsx)("div",{className:"col-12",children:(0,E.jsx)("label",{htmlFor:"ShippingPostalCode2",children:"Postal Code"})}),(0,E.jsx)("div",{className:"col-12",children:(0,E.jsx)(g.o,{id:"ShippingPostalCode2",name:"shippingAddressPostalcode",maxLength:20,value:H.shippingAddressPostalcode,onChange:ze})})]})}),(0,E.jsx)("div",{className:"col-12 hidden-sm hidden-md hidden-lg",children:(0,E.jsxs)("div",{className:"grid",children:[(0,E.jsx)("div",{className:"col-12",children:(0,E.jsx)("label",{htmlFor:"ShippingCountry2",children:"Country"})}),(0,E.jsx)("div",{className:"col-12",children:(0,E.jsx)(g.o,{id:"ShippingCountry2",name:"shippingAddressCountry",maxLength:255,value:H.shippingAddressCountry,onChange:ze})})]})})]})]}),(0,E.jsx)("div",{className:"grid",children:(0,E.jsx)("div",{className:"col-12",children:"\xa0"})}),(0,E.jsxs)(u.Z,{children:[(0,E.jsx)("div",{className:"grid",children:(0,E.jsx)("div",{className:"col-12",children:(0,E.jsx)("h3",{children:"Terms & Conditions"})})}),(0,E.jsx)("div",{className:"grid",children:(0,E.jsx)("div",{className:"col-12",children:(0,E.jsx)(N.g,{name:"termsConditions",value:H.termsConditions,onChange:ze,style:{width:280},autoResize:!0})})})]}),(0,E.jsx)("div",{className:"grid",children:(0,E.jsx)("div",{className:"col-12",children:"\xa0"})}),(0,E.jsxs)(u.Z,{children:[(0,E.jsx)("div",{className:"grid",children:(0,E.jsx)("div",{className:"col-12",children:(0,E.jsx)("h3",{children:"Description"})})}),(0,E.jsx)("div",{className:"grid",children:(0,E.jsx)("div",{className:"col-12",children:(0,E.jsx)(N.g,{name:"description",value:H.description,onChange:ze,style:{width:280},autoResize:!0})})})]}),(0,E.jsxs)(u.Z,{children:[(0,E.jsxs)("div",{className:"grid",children:[(0,E.jsx)("div",{className:"col text-left",children:(0,E.jsx)("h3",{children:"Items"})}),(0,E.jsx)("div",{className:"col text-right",children:(0,E.jsx)(h.z,{icon:"pi pi-plus",className:"p-button-rounded p-button-outlined",tooltip:"Add Purchase Order Item",onClick:function(){K(!0);var e={id:(0,D.Z)(),quantity:1,discountType:"",discount:0,tax:0,total:0,taxes:[]},i=0,s=0;if(pe&&pe.length>0){var d=pe[0];e.productId=d.id,e.listPrice=d.unitPrice||0,e.purchaseCost=(d.purchaseCost||0)*(e.quantity||0),d.currencyId!==H.currencyId&&(e.listPrice=(0,L.Nh)(d.currencyId||"",H.currencyId||"",e.listPrice,we),e.purchaseCost=(0,L.Nh)(d.currencyId||"",H.currencyId||"",e.purchaseCost,we)),e.taxes=(0,l.Z)(d.taxes||[]),i=e.listPrice,s=0,e.taxes.length>0&&(e.taxes.forEach((function(e){s+=i*(e.value||0)/100})),e.tax=s),e.total=i}var n=(H.subTotal||0)+i,r=(H.taxTotal||0)+s,c=n+r,t=[].concat((0,l.Z)(H.items||[]),[e]);W((0,a.Z)((0,a.Z)({},H),{},{subTotal:n,taxTotal:r,total:c,items:t}))}})})]}),(0,E.jsx)("div",{className:"grid",children:(0,E.jsx)("div",{className:"col-12",children:(0,E.jsxs)(v.w,{value:H.items,editMode:"row",dataKey:"id",onRowEditComplete:function(e){K(!0);var i=e.newData,s=e.index,d=e.data,n=i;n.discount=d.discount||0;var r=(n.listPrice||0)*(n.quantity||0);switch(n.discountType){case"%":r-=r*(n.discount||0)/100;break;case"$":r-=n.discount||0;break;default:n.discount=0}n.total=r;var c=0,t=pe.find((function(e){return e.id===n.productId}));t&&(n.purchaseCost=(t.purchaseCost||0)*(n.quantity||0),n.taxes=(0,l.Z)(t.taxes||[]),n.taxes.length>0&&(n.taxes.forEach((function(e){c+=r*(e.value||0)/100})),n.tax=c));var o=r,h=c,u=0;H.items&&(H.items.forEach((function(e){e.id!==n.id&&(o+=e.total||0,h+=e.tax||0)})),u=o+h);var x=(0,l.Z)(H.items||[]);x[s]=n,W((0,a.Z)((0,a.Z)({},H),{},{subTotal:o,taxTotal:h,total:u,items:x}))},reorderableRows:!0,onRowReorder:function(e){K(!0),W((0,a.Z)((0,a.Z)({},H),{},{items:e.value}))},footer:He,children:[(0,E.jsx)(m.s,{rowReorder:!0,style:{width:"3em"}}),(0,E.jsx)(m.s,{field:"productId",header:"Item Name",body:function(e){var i=Ie.find((function(i){return i.id===e.productId}));return null===i||void 0===i?void 0:i.name},editor:function(e){return qe(e)}}),(0,E.jsx)(m.s,{field:"comment",header:"Comment",editor:function(e){return function(e){return(0,E.jsx)(g.o,{value:e.value,onChange:function(i){return e.editorCallback(i.target.value)}})}(e)}}),(0,E.jsx)(m.s,{field:"quantity",header:"Quantity",editor:function(e){return Ue(e)}}),(0,E.jsx)(m.s,{field:"listPrice",header:"Selling Price",body:function(e){var i;return(0,E.jsx)("div",{className:"text-right",children:null===e||void 0===e||null===(i=e.listPrice)||void 0===i?void 0:i.toFixed(2)})},editor:function(e){return Ue(e)}}),(0,E.jsx)(m.s,{field:"discountType",header:"Discount",body:function(e){return"".concat(null===e||void 0===e?void 0:e.discountType," ").concat(null===e||void 0===e?void 0:e.discount)},editor:function(e){return Oe(e)}}),(0,E.jsx)(m.s,{field:"total",header:"Total",body:function(e){var i;return(0,E.jsx)("div",{className:"text-right",children:null===e||void 0===e||null===(i=e.total)||void 0===i?void 0:i.toFixed(2)})}}),(0,E.jsx)(m.s,{rowEditor:!0,headerStyle:{minWidth:"2rem"},bodyStyle:{textAlign:"center"}}),(0,E.jsx)(m.s,{body:function(e){return(0,E.jsx)(E.Fragment,{children:(0,E.jsx)(h.z,{icon:"pi pi-trash",className:"p-row-editor-init p-link",tooltip:"Delete",onClick:function(){return $e(e)}})})},style:{minWidth:"2rem",textAlign:"center"}})]})})})]}),(0,E.jsxs)("div",{className:"grid",children:[(0,E.jsx)("div",{className:"col-12",children:"\xa0"}),(0,E.jsxs)("div",{className:"col-12",children:[(0,E.jsx)(h.z,{icon:"pi pi-check",className:"p-button-rounded p-button-outlined",tooltip:"Save",disabled:!ie,onClick:We}),"\xa0 \xa0",(0,E.jsx)(h.z,{icon:"pi pi-times",className:"p-button-rounded p-button-outlined",tooltip:"Back to List",onClick:_e}),"\xa0 \xa0",(0,E.jsx)(h.z,{icon:"pi pi-print",className:"p-button-rounded p-button-outlined",tooltip:"Print",onClick:Qe})]})]}),(0,E.jsx)(j.V,{visible:te,style:{width:"450px"},header:"Confirm",modal:!0,footer:Ye,onHide:Ge,children:(0,E.jsxs)("div",{className:"confirmation-content",children:[(0,E.jsx)("i",{className:"pi pi-exclamation-triangle mr-3",style:{fontSize:"2rem"}}),(0,E.jsx)("strong",{children:"Are you sure you want to delete this item?"})]})})]}),(0,E.jsx)("div",{className:"p-hidden",children:(0,E.jsx)("div",{ref:be,children:(0,E.jsx)(z,{item:H,currencies:we,products:Ie,vendors:Le})})})]})}},3063:function(e,i,s){s.d(i,{$8:function(){return l},Hr:function(){return r},_1:function(){return a},oB:function(){return n},wQ:function(){return d}});var d="Something bad happened. Please try again later.",n="Email is invalid.",l="Confirm Password is required.",r="Please re-enter passwords. The passwords do not match.",a=" - Unless otherwise agreed in writing by the supplier all invoices are payable within thirty (30) days of the date of invoice, in the currency of the invoice, drawn on a bank based in the USA or by such other method as is agreed in advance by the Supplier.\n- All prices are not inclusive of VAT which shall be payable in addition by the Customer at the applicable rate."},3646:function(e,i,s){s.d(i,{$v:function(){return n},Ay:function(){return d},Gh:function(){return l}});var d=["Cold Call","Existing Customer","Self Generated","Employee","Partner","Public Relations","Direct Mail","Conference","Trade Show","Web Site","Word of mouth","Email","Campaign","Other"],n=[{value:"Zero Discount",icon:"fas fa-circle"},{value:"% Price",icon:"fas fa-percent"},{value:"Direct Price Reduction",icon:"fas fa-arrow-down"}],l=["Created","Approved","Delivered","Cancelled"]},8078:function(e,i,s){s.d(i,{A8:function(){return r},HN:function(){return d},Nh:function(){return a},YM:function(){return l},xN:function(){return n}});var d=/^([a-zA-Z0-9_\-+'])+(\.[a-zA-Z0-9_\-+']+)*@((([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,15}))\s*$/i,n=function(e){return e?new Date(e).toISOString():""},l=function(e){return e?new Date(e):void 0},r=function(e){var i=parseFloat(e);return isNaN(i)?void 0:i},a=function(e,i,s,d){var n=r(s);if(!n)return s;var l=d.find((function(i){return i.id===e}));return l&&l.conversionRate&&!isNaN(l.conversionRate)&&l.conversionRate>0&&(n/=l.conversionRate),(l=d.find((function(e){return e.id===i})))&&l.conversionRate&&!isNaN(l.conversionRate)&&l.conversionRate>0&&(n*=l.conversionRate),parseFloat(n.toFixed(2))}}}]);