"use strict";(self.webpackChunkcrmdemo1=self.webpackChunkcrmdemo1||[]).push([[5055],{8431:function(e,n,i){i.r(n);var s=i(4165),a=i(5861),r=i(4942),c=i(1413),l=i(9439),o=i(2791),t=i(7689),d=i(919),u=i(4045),m=i(9585),h=i(3014),x=i(5533),v=i(5103),p=i(8218),f=i(1945),N=i(5048),j=i(9777),g=i(2358),y=i(1067),C=i(9911),b=i(8715),Z=i(7370),I=i(4261),S=i(8284),w=i(3396),A=i(184);n.default=function(){var e="/opportunities",n=(0,t.s0)(),i=(0,o.useState)("Create"),L=(0,l.Z)(i,2),F=L[0],O=L[1],R=(0,o.useState)({id:"",name:"",assignedUserId:"",assignedUserLastName:"",opportunityType:"",campaignId:"",leadSource:"",amount:null,amountUsDollar:null,currencyId:"",dateClosed:"",nextStep:"",salesStage:"",probability:null,accountId:"",accountName:"",description:""}),P=(0,l.Z)(R,2),D=P[0],k=P[1],E=(0,o.useState)(!1),T=(0,l.Z)(E,2),q=T[0],U=T[1],z=(0,o.useState)(!1),B=(0,l.Z)(z,2),V=B[0],M=B[1],Y=(0,o.useState)({}),$=(0,l.Z)(Y,2),W=$[0],G=$[1],Q=(0,t.UO)(),_=(0,o.useRef)(!0),H=(0,j.C)((function(e){return[e.opportunities.opportunity,e.opportunities.isFetching,e.opportunities.isError,e.accounts.accounts,e.campaigns.campaigns,e.currencies.currencies,e.users.users,e.users.isProfile,e.users.profile]}),N.wU),J=(0,l.Z)(H,9),X=J[0],K=J[1],ee=J[2],ne=J[3],ie=J[4],se=J[5],ae=J[6],re=J[7],ce=J[8],le=(0,j.T)();(0,o.useEffect)((function(){if(_.current&&(_.current=!1,le(y.$h.getAccounts()),le(C.JP.getCampaigns()),le(b.gC.getCurrencies()),le(Z.hI.getUsers()),"edit"===Q.mode)){O("Edit");var e=Q.id;e&&le(g.Yg.getOpportunityById(e))}}),[Q,le]),(0,o.useEffect)((function(){"edit"!==Q.mode&&re&&ce&&ce.currencyId&&""===D.currencyId&&ce.currencyId!==D.currencyId&&k((0,c.Z)((0,c.Z)({},D),{},{currencyId:ce.currencyId}))}),[Q,re,ce,D]),(0,o.useEffect)((function(){"edit"!==Q.mode||D.id===(null===X||void 0===X?void 0:X.id)||K||ee||k(X)}),[Q,D,X,K,ee]),(0,o.useEffect)((function(){if(q){for(var e=!0,n=["name","accountId","accountName","dateClosed","amount"],i=0,s=Object.entries(D);i<s.length;i++){var a=(0,l.Z)(s[i],2),r=a[0],c=a[1];if(!(n.indexOf(r)<0)){if("string"===typeof c&&0===(null===c||void 0===c?void 0:c.trim().length)){e=!1;break}if("amount"===r&&null===c){e=!1;break}}}M(e)}}),[q,D]);var oe=function(e){U(!0);var n=e.target,i=n.name,s=n.value;if("assignedUserId"===i){var a,l=ae.find((function(e){return e.id===s}));if(l)k((0,c.Z)((0,c.Z)({},D),{},(a={},(0,r.Z)(a,i,s),(0,r.Z)(a,"assignedUserLastName",l.lastName),a)))}else if("accountId"===i){var o,t=ne.find((function(e){return e.id===s}));if(t)k((0,c.Z)((0,c.Z)({},D),{},(o={},(0,r.Z)(o,i,s),(0,r.Z)(o,"accountName",t.name),o)))}else k("dateClosed"===i?(0,c.Z)((0,c.Z)({},D),{},(0,r.Z)({},i,(0,S.xN)(s))):"currencyId"===i?(0,c.Z)((0,c.Z)({},D),function(e){var n=D.currencyId?D.currencyId:"";return{currencyId:e,amount:(0,S.Nh)(n,e,D.amount,se)}}(s)):"amount"===i?(0,c.Z)((0,c.Z)({},D),function(e){var n=null,i=(0,S.A8)(e);if(i){var s=se.find((function(e){return e.id===D.currencyId}));s&&("$"===s.symbol?n=i:(s=se.find((function(e){return"$"===e.symbol})))&&s.id&&D.currencyId&&(n=(0,S.Nh)(D.currencyId,s.id,i,se)))}return{amount:i,amountUsDollar:n}}(s)):(0,c.Z)((0,c.Z)({},D),{},(0,r.Z)({},i,s)));"name"!==i&&"accountId"!==i&&"dateClosed"!==i&&"amount"!==i||G((0,c.Z)((0,c.Z)({},W),{},(0,r.Z)({},i,!s||0===s.toString().trim().length)))},te=function(){var i=(0,a.Z)((0,s.Z)().mark((function i(){return(0,s.Z)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:"Edit"!==F&&(D.id=(0,I.Z)()),le(g.Yg.updateOpportunity(D)),setTimeout((function(){le(g.Yg.getOpportunities())}),300),n(e);case 4:case"end":return i.stop()}}),i)})));return function(){return i.apply(this,arguments)}}(),de=function(){var i=(0,a.Z)((0,s.Z)().mark((function i(){return(0,s.Z)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:n(e);case 1:case"end":return i.stop()}}),i)})));return function(){return i.apply(this,arguments)}}();return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsxs)("h3",{className:"caption",children:["Opportunity: ",F]}),(0,A.jsx)("div",{className:"grid",children:(0,A.jsxs)("div",{className:"col-12",children:[(0,A.jsx)("span",{className:"field-required",children:"*"})," - Required field"]})}),(0,A.jsxs)(u.Z,{children:[(0,A.jsx)("div",{className:"grid",children:(0,A.jsx)("div",{className:"col-12",children:(0,A.jsx)("h3",{children:"Opportunity"})})}),(0,A.jsxs)("div",{className:"grid",children:[(0,A.jsx)("div",{className:"col-12",children:(0,A.jsxs)("div",{className:"grid",children:[(0,A.jsx)("div",{className:"col",children:(0,A.jsxs)("label",{htmlFor:"OpportunityName",children:["Opportunity Name ",(0,A.jsx)("span",{className:"field-required",children:"*"})]})}),(0,A.jsxs)("div",{className:"col",children:[(0,A.jsx)(v.o,{id:"OpportunityName",name:"name",maxLength:50,value:D.name,onChange:oe}),(null===W||void 0===W?void 0:W.name)&&(0,A.jsx)(f.v,{severity:"error",text:"Opportunity Name is required."})]}),(0,A.jsx)("div",{className:"col-fixed p-fixed hidden-xs",children:"\xa0"}),(0,A.jsx)("div",{className:"col",children:(0,A.jsx)("label",{htmlFor:"Type",children:"Type"})}),(0,A.jsx)("div",{className:"col",children:(0,A.jsx)(h.L,{id:"Type",name:"opportunityType",options:["Existing Business","New Business"],value:D.opportunityType,onChange:oe,className:"p-combobox"})})]})}),(0,A.jsx)("div",{className:"col-12",children:(0,A.jsxs)("div",{className:"grid",children:[(0,A.jsx)("div",{className:"col",children:(0,A.jsxs)("label",{htmlFor:"AccountName",children:["Account Name ",(0,A.jsx)("span",{className:"field-required",children:"*"})]})}),(0,A.jsxs)("div",{className:"col",children:[(0,A.jsx)(h.L,{id:"AccountName",name:"accountId",options:ne,optionLabel:"name",optionValue:"id",value:D.accountId,onChange:oe,className:"p-combobox"}),(null===W||void 0===W?void 0:W.accountId)&&(0,A.jsx)(f.v,{severity:"error",text:"Account Name is required."})]}),(0,A.jsx)("div",{className:"col-fixed p-fixed hidden-xs",children:"\xa0"}),(0,A.jsx)("div",{className:"col",children:(0,A.jsx)("label",{htmlFor:"LeadSource",children:"Lead Source"})}),(0,A.jsx)("div",{className:"col",children:(0,A.jsx)(h.L,{id:"LeadSource",name:"leadSource",options:w.Ay,value:D.leadSource,onChange:oe,className:"p-combobox"})})]})}),(0,A.jsx)("div",{className:"col-12",children:(0,A.jsxs)("div",{className:"grid",children:[(0,A.jsx)("div",{className:"col",children:(0,A.jsx)("label",{htmlFor:"Campaign",children:"Campaign"})}),(0,A.jsx)("div",{className:"col",children:(0,A.jsx)(h.L,{id:"Campaign",name:"campaignId",options:ie,optionLabel:"name",optionValue:"id",value:D.campaignId,onChange:oe,className:"p-combobox"})}),(0,A.jsx)("div",{className:"col-fixed p-fixed hidden-xs",children:"\xa0"}),(0,A.jsx)("div",{className:"col",children:(0,A.jsx)("label",{htmlFor:"AssignedTo",children:"Assigned To"})}),(0,A.jsx)("div",{className:"col",children:(0,A.jsx)(h.L,{id:"AssignedTo",name:"assignedUserId",options:ae,optionLabel:"lastName",optionValue:"id",value:D.assignedUserId,onChange:oe,className:"p-combobox"})})]})})]})]}),(0,A.jsx)("div",{className:"grid",children:(0,A.jsx)("div",{className:"col-12",children:"\xa0"})}),(0,A.jsxs)(u.Z,{children:[(0,A.jsx)("div",{className:"grid",children:(0,A.jsx)("div",{className:"col-12",children:(0,A.jsx)("h3",{children:"Finance"})})}),(0,A.jsxs)("div",{className:"grid",children:[(0,A.jsx)("div",{className:"col-12",children:(0,A.jsxs)("div",{className:"grid",children:[(0,A.jsx)("div",{className:"col",children:(0,A.jsx)("label",{htmlFor:"SalesStage",children:"Sales Stage"})}),(0,A.jsx)("div",{className:"col",children:(0,A.jsx)(h.L,{id:"SalesStage",name:"salesStage",options:["Prospecting","Qualification","Needs Analysis","Value Proposition","Id. Decision Makers","Perception Analysis","Proposal/Price Quote","Negotiation/Review","Closed Won","Closed Lost"],value:D.salesStage,onChange:oe,className:"p-combobox"})}),(0,A.jsx)("div",{className:"col-fixed p-fixed hidden-xs",children:"\xa0"}),(0,A.jsx)("div",{className:"col",children:(0,A.jsxs)("label",{htmlFor:"CloseDate",children:["Close Date ",(0,A.jsx)("span",{className:"field-required",children:"*"})]})}),(0,A.jsxs)("div",{className:"col",children:[(0,A.jsx)(m.f,{id:"CloseDate",name:"dateClosed",value:(0,S.YM)(D.dateClosed),onChange:oe,showButtonBar:!0,showIcon:!0,className:"p-combobox"}),(null===W||void 0===W?void 0:W.dateClosed)&&(0,A.jsx)(f.v,{severity:"error",text:"Close Date is required."})]})]})}),(0,A.jsx)("div",{className:"col-12",children:(0,A.jsxs)("div",{className:"grid",children:[(0,A.jsx)("div",{className:"col",children:(0,A.jsxs)("label",{htmlFor:"Currency",children:["Currency ",(0,A.jsx)("span",{className:"field-required",children:"*"})]})}),(0,A.jsxs)("div",{className:"col",children:[(0,A.jsx)(h.L,{id:"Currency",name:"currencyId",options:se,optionLabel:"name",optionValue:"id",value:D.currencyId,onChange:oe,className:"p-combobox"}),(null===W||void 0===W?void 0:W.currencyId)&&(0,A.jsx)(f.v,{severity:"error",text:"Currency is required."})]}),(0,A.jsx)("div",{className:"col-fixed p-fixed hidden-xs",children:"\xa0"}),(0,A.jsx)("div",{className:"col",children:(0,A.jsx)("label",{htmlFor:"NextStep",children:"Next Step"})}),(0,A.jsx)("div",{className:"col",children:(0,A.jsx)(v.o,{id:"NextStep",name:"nextStep",maxLength:100,value:D.nextStep,onChange:oe})})]})}),(0,A.jsx)("div",{className:"col-12",children:(0,A.jsxs)("div",{className:"grid",children:[(0,A.jsx)("div",{className:"col",children:(0,A.jsxs)("label",{htmlFor:"Amount",children:["Amount ",(0,A.jsx)("span",{className:"field-required",children:"*"})]})}),(0,A.jsxs)("div",{className:"col",children:[(0,A.jsx)(x.R,{id:"Amount",name:"amount",value:D.amount,onValueChange:oe}),(null===W||void 0===W?void 0:W.amount)&&(0,A.jsx)(f.v,{severity:"error",text:"Amount is required."})]}),(0,A.jsx)("div",{className:"col-fixed p-fixed hidden-xs",children:"\xa0"}),(0,A.jsx)("div",{className:"col",children:(0,A.jsx)("label",{htmlFor:"Probability",children:"Probability"})}),(0,A.jsx)("div",{className:"col",children:(0,A.jsx)(x.R,{id:"Probability",name:"probability",value:D.probability,onValueChange:oe})})]})})]})]}),(0,A.jsx)("div",{className:"grid",children:(0,A.jsx)("div",{className:"col-12",children:"\xa0"})}),(0,A.jsxs)(u.Z,{children:[(0,A.jsx)("div",{className:"grid",children:(0,A.jsx)("div",{className:"col-12",children:(0,A.jsx)("h3",{children:"Description"})})}),(0,A.jsx)("div",{className:"grid",children:(0,A.jsx)("div",{className:"col-12",children:(0,A.jsx)(p.g,{name:"description",value:D.description,onChange:oe,autoResize:!0})})})]}),(0,A.jsxs)("div",{className:"grid",children:[(0,A.jsx)("div",{className:"col-12",children:"\xa0"}),(0,A.jsxs)("div",{className:"col-12",children:[(0,A.jsx)(d.z,{icon:"pi pi-check",className:"p-button-rounded p-button-outlined",tooltip:"Save",disabled:!V,onClick:te}),"\xa0 \xa0",(0,A.jsx)(d.z,{icon:"pi pi-times",className:"p-button-rounded p-button-outlined",tooltip:"Back to List",onClick:de})]})]})]})}},3396:function(e,n,i){i.d(n,{$v:function(){return a},Ay:function(){return s},Gh:function(){return r}});var s=["Cold Call","Existing Customer","Self Generated","Employee","Partner","Public Relations","Direct Mail","Conference","Trade Show","Web Site","Word of mouth","Email","Campaign","Other"],a=[{value:"Zero Discount",icon:"fas fa-circle"},{value:"% Price",icon:"fas fa-percent"},{value:"Direct Price Reduction",icon:"fas fa-arrow-down"}],r=["Created","Approved","Delivered","Cancelled"]},8284:function(e,n,i){i.d(n,{A8:function(){return c},HN:function(){return s},Nh:function(){return l},YM:function(){return r},xN:function(){return a}});var s=/^([a-zA-Z0-9_\-+'])+(\.[a-zA-Z0-9_\-+']+)*@((([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,15}))\s*$/i,a=function(e){return e?new Date(e).toISOString():""},r=function(e){return e?new Date(e):void 0},c=function(e){var n=parseFloat(e);return isNaN(n)?void 0:n},l=function(e,n,i,s){var a=c(i);if(!a)return i;var r=s.find((function(n){return n.id===e}));return r&&r.conversionRate&&!isNaN(r.conversionRate)&&r.conversionRate>0&&(a/=r.conversionRate),(r=s.find((function(e){return e.id===n})))&&r.conversionRate&&!isNaN(r.conversionRate)&&r.conversionRate>0&&(a*=r.conversionRate),parseFloat(a.toFixed(2))}},8170:function(e,n,i){i.d(n,{X:function(){return c}});var s=i(2791),a=i(5036);function r(){return r=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(e[s]=i[s])}return e},r.apply(this,arguments)}var c=s.memo(s.forwardRef((function(e,n){var i=a.A.getPTI(e);return s.createElement("svg",r({ref:n,width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i),s.createElement("path",{d:"M4.38708 13C4.28408 13.0005 4.18203 12.9804 4.08691 12.9409C3.99178 12.9014 3.9055 12.8433 3.83313 12.7701C3.68634 12.6231 3.60388 12.4238 3.60388 12.2161C3.60388 12.0084 3.68634 11.8091 3.83313 11.6622L8.50507 6.99022L3.83313 2.31827C3.69467 2.16968 3.61928 1.97313 3.62287 1.77005C3.62645 1.56698 3.70872 1.37322 3.85234 1.22959C3.99596 1.08597 4.18972 1.00371 4.3928 1.00012C4.59588 0.996539 4.79242 1.07192 4.94102 1.21039L10.1669 6.43628C10.3137 6.58325 10.3962 6.78249 10.3962 6.99022C10.3962 7.19795 10.3137 7.39718 10.1669 7.54416L4.94102 12.7701C4.86865 12.8433 4.78237 12.9014 4.68724 12.9409C4.59212 12.9804 4.49007 13.0005 4.38708 13Z",fill:"currentColor"}))})));c.displayName="ChevronRightIcon"}}]);
//# sourceMappingURL=5055.4508b156.chunk.js.map