"use strict";(self.webpackChunkcrmdemo1=self.webpackChunkcrmdemo1||[]).push([[7237],{4820:function(e,s,a){a.r(s);var i=a(4165),n=a(5861),r=a(4942),c=a(1413),d=a(9439),l=a(2791),t=a(7689),o=a(919),u=a(4045),m=a(9585),v=a(3014),x=a(5533),h=a(5103),j=a(8218),p=a(1945),N=a(5048),g=a(9777),f=a(9911),C=a(8715),b=a(7370),Z=a(4261),y=a(8284),D=a(184);s.default=function(){var e="/campaigns",s=(0,t.s0)(),a=(0,l.useState)("Create"),I=(0,d.Z)(a,2),w=I[0],R=I[1],E=(0,l.useState)({id:"",name:"",assignedUserId:"",assignedUserLastName:"",startDate:"",endDate:"",status:"",impressions:null,currencyId:"",budget:null,actualCost:null,expectedCost:null,expectedRevenue:null,campaignType:"",objective:"",description:""}),L=(0,d.Z)(E,2),S=L[0],F=L[1],T=(0,l.useState)(!1),A=(0,d.Z)(T,2),k=A[0],q=A[1],U=(0,l.useState)(!1),B=(0,d.Z)(U,2),O=B[0],z=B[1],P=(0,l.useState)({}),M=(0,d.Z)(P,2),V=M[0],J=M[1],Y=(0,t.UO)(),_=(0,l.useRef)(!0),H=(0,g.C)((function(e){return[e.campaigns.campaign,e.campaigns.isFetching,e.campaigns.isError,e.campaigns.campaigns,e.currencies.currencies,e.users.users,e.users.isProfile,e.users.profile]}),N.wU),Q=(0,d.Z)(H,8),W=Q[0],X=Q[1],$=Q[2],G=Q[3],K=Q[4],ee=Q[5],se=Q[6],ae=Q[7],ie=(0,g.T)();(0,l.useEffect)((function(){if(_.current&&(_.current=!1,ie(C.gC.getCurrencies()),ie(b.hI.getUsers()),"edit"===Y.mode)){R("Edit");var e=Y.id;e&&ie(f.JP.getCampaignById(e))}}),[Y,ie]),(0,l.useEffect)((function(){"edit"!==Y.mode&&se&&ae&&ae.currencyId&&""===S.currencyId&&ae.currencyId!==S.currencyId&&F((0,c.Z)((0,c.Z)({},S),{},{currencyId:ae.currencyId}))}),[Y,se,ae,S]),(0,l.useEffect)((function(){"edit"!==Y.mode||S.id===(null===W||void 0===W?void 0:W.id)||X||$||F(W)}),[Y,S,W,X,$]);var ne=(0,l.useCallback)((function(e){var s=!0;return 0===S.id.length?G.find((function(s){var a;return(null===(a=s.name)||void 0===a?void 0:a.toLowerCase())===(null===e||void 0===e?void 0:e.toLowerCase())}))&&(s=!1):G.find((function(s){var a;return(null===(a=s.name)||void 0===a?void 0:a.toLowerCase())===(null===e||void 0===e?void 0:e.toLowerCase())&&s.id!==S.id}))&&(s=!1),s}),[S.id,G]);(0,l.useEffect)((function(){if(k){for(var e=!0,s=["id","assignedUserId","assignedUserLastName","startDate","objective","description"],a=0,i=Object.entries(S);a<i.length;a++){var n=(0,d.Z)(i[a],2),r=n[0],c=n[1];if(!(s.indexOf(r)>-1)&&("string"===typeof c&&0===(null===c||void 0===c?void 0:c.trim().length))){e=!1;break}}z(e&&ne(S.name||""))}}),[k,S,ne]);var re=function(e){q(!0);var s=e.target,a=s.name,i=s.value;if("assignedUserId"===a){var n,d=ee.find((function(e){return e.id===i}));if(d)F((0,c.Z)((0,c.Z)({},S),{},(n={},(0,r.Z)(n,a,i),(0,r.Z)(n,"assignedUserLastName",d.lastName),n)))}else F("startDate"===a||"endDate"===a?(0,c.Z)((0,c.Z)({},S),{},(0,r.Z)({},a,(0,y.xN)(i))):"currencyId"===a?(0,c.Z)((0,c.Z)({},S),function(e){var s=S.currencyId?S.currencyId:"";return{currencyId:e,budget:(0,y.Nh)(s,e,S.budget,K),actualCost:(0,y.Nh)(s,e,S.actualCost,K),expectedRevenue:(0,y.Nh)(s,e,S.expectedRevenue,K),expectedCost:(0,y.Nh)(s,e,S.expectedCost,K)}}(i)):(0,c.Z)((0,c.Z)({},S),{},(0,r.Z)({},a,i)));if("name"===a){var l=ne(i);J((0,c.Z)((0,c.Z)({},V),{},(0,r.Z)({nameInvalid:!l},a,!i||0===i.toString().trim().length)))}else if("endDate"===a)if(i)if(0===i.toString().trim().length)J((0,c.Z)((0,c.Z)({},V),{},{endDate:!0}));else if(S.startDate){var t=new Date(S.startDate),o=new Date(i);J((0,c.Z)((0,c.Z)({},V),{},{endDate:!1,startDateMoreThanEndDate:t>o}))}else J((0,c.Z)((0,c.Z)({},V),{},{endDate:!1}));else J((0,c.Z)((0,c.Z)({},V),{},{endDate:!0}))},ce=function(){var a=(0,n.Z)((0,i.Z)().mark((function a(){return(0,i.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:"Edit"!==w&&(S.id=(0,Z.Z)()),ie(f.JP.updateCampaign(S)),setTimeout((function(){ie(f.JP.getCampaigns())}),300),s(e);case 4:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}(),de=function(){var a=(0,n.Z)((0,i.Z)().mark((function a(){return(0,i.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:s(e);case 1:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}();return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsxs)("h3",{className:"caption",children:["Campaign: ",w]}),(0,D.jsx)("div",{className:"grid",children:(0,D.jsxs)("div",{className:"col-12",children:[(0,D.jsx)("span",{className:"field-required",children:"*"})," - Required field"]})}),(0,D.jsxs)(u.Z,{children:[(0,D.jsx)("div",{className:"grid",children:(0,D.jsx)("div",{className:"col-12",children:(0,D.jsx)("h3",{children:"Campaign"})})}),(0,D.jsxs)("div",{className:"grid",children:[(0,D.jsx)("div",{className:"col-12",children:(0,D.jsxs)("div",{className:"grid",children:[(0,D.jsx)("div",{className:"col",children:(0,D.jsxs)("label",{htmlFor:"CampaignName",children:["Campaign Name ",(0,D.jsx)("span",{className:"field-required",children:"*"})]})}),(0,D.jsxs)("div",{className:"col",children:[(0,D.jsx)(h.o,{id:"CampaignName",name:"name",maxLength:50,value:S.name,onChange:re}),(null===V||void 0===V?void 0:V.name)&&(0,D.jsx)(p.v,{severity:"error",text:"Campaign Name is required."}),(null===V||void 0===V?void 0:V.nameInvalid)&&(0,D.jsx)(p.v,{severity:"error",text:"Campaign Name already exists."})]}),(0,D.jsx)("div",{className:"col-fixed p-fixed hidden-xs",children:"\xa0"}),(0,D.jsx)("div",{className:"col",children:(0,D.jsx)("label",{htmlFor:"AssignedTo",children:"Assigned To"})}),(0,D.jsx)("div",{className:"col",children:(0,D.jsx)(v.L,{id:"AssignedTo",name:"assignedUserId",options:ee,optionLabel:"lastName",optionValue:"id",value:S.assignedUserId,onChange:re,className:"p-combobox"})})]})}),(0,D.jsx)("div",{className:"col-12",children:(0,D.jsxs)("div",{className:"grid",children:[(0,D.jsx)("div",{className:"col",children:(0,D.jsxs)("label",{htmlFor:"Status",children:["Status ",(0,D.jsx)("span",{className:"field-required",children:"*"})]})}),(0,D.jsxs)("div",{className:"col",children:[(0,D.jsx)(v.L,{id:"Status",name:"status",options:["Planning","Active","Inactive","Complete","In Queue","Sending"],value:S.status,onChange:re,className:"p-combobox"}),(null===V||void 0===V?void 0:V.status)&&(0,D.jsx)(p.v,{severity:"error",text:"Status is required."})]}),(0,D.jsx)("div",{className:"col-fixed p-fixed hidden-xs",children:"\xa0"}),(0,D.jsx)("div",{className:"col",children:(0,D.jsxs)("label",{htmlFor:"Type",children:["Type ",(0,D.jsx)("span",{className:"field-required",children:"*"})]})}),(0,D.jsxs)("div",{className:"col",children:[(0,D.jsx)(v.L,{id:"Type",name:"campaignType",options:["Telesales","Mail","Email","Print","Web","Radio","Television","Newsletter"],value:S.campaignType,onChange:re,className:"p-combobox"}),(null===V||void 0===V?void 0:V.campaignType)&&(0,D.jsx)(p.v,{severity:"error",text:"Type is required."})]})]})}),(0,D.jsx)("div",{className:"col-12",children:(0,D.jsxs)("div",{className:"grid",children:[(0,D.jsx)("div",{className:"col",children:(0,D.jsx)("label",{htmlFor:"StartDate",children:"Start Date"})}),(0,D.jsx)("div",{className:"col",children:(0,D.jsx)(m.f,{id:"StartDate",name:"startDate",value:(0,y.YM)(S.startDate),onChange:re,showButtonBar:!0,showIcon:!0,className:"p-combobox"})}),(0,D.jsx)("div",{className:"col-fixed p-fixed hidden-xs",children:"\xa0"}),(0,D.jsx)("div",{className:"col",children:(0,D.jsxs)("label",{htmlFor:"EndDate",children:["End Date ",(0,D.jsx)("span",{className:"field-required",children:"*"})]})}),(0,D.jsxs)("div",{className:"col",children:[(0,D.jsx)(m.f,{id:"EndDate",name:"endDate",value:(0,y.YM)(S.endDate),onChange:re,showButtonBar:!0,showIcon:!0,className:"p-combobox"}),(null===V||void 0===V?void 0:V.endDate)&&(0,D.jsx)(p.v,{severity:"error",text:"End Date is required."}),(null===V||void 0===V?void 0:V.startDateMoreThanEndDate)&&(0,D.jsx)(p.v,{severity:"error",text:"Start Date cannot be more than End Date."})]})]})})]})]}),(0,D.jsx)("div",{className:"grid",children:(0,D.jsx)("div",{className:"col-12",children:"\xa0"})}),(0,D.jsxs)(u.Z,{children:[(0,D.jsx)("div",{className:"grid",children:(0,D.jsx)("div",{className:"col-12",children:(0,D.jsx)("h3",{children:"Finance"})})}),(0,D.jsxs)("div",{className:"grid",children:[(0,D.jsx)("div",{className:"col-12",children:(0,D.jsxs)("div",{className:"grid",children:[(0,D.jsx)("div",{className:"col",children:(0,D.jsxs)("label",{htmlFor:"Currency",children:["Currency ",(0,D.jsx)("span",{className:"field-required",children:"*"})]})}),(0,D.jsxs)("div",{className:"col",children:[(0,D.jsx)(v.L,{id:"Currency",name:"currencyId",options:K,optionLabel:"name",optionValue:"id",value:S.currencyId,onChange:re,className:"p-combobox"}),(null===V||void 0===V?void 0:V.currencyId)&&(0,D.jsx)(p.v,{severity:"error",text:"Currency is required."})]}),(0,D.jsx)("div",{className:"col-fixed p-fixed hidden-xs",children:"\xa0"}),(0,D.jsx)("div",{className:"col",children:(0,D.jsx)("label",{htmlFor:"Impressions",children:"Impressions"})}),(0,D.jsx)("div",{className:"col",children:(0,D.jsx)(x.R,{id:"Impressions",name:"impressions",value:S.impressions,onValueChange:re})})]})}),(0,D.jsx)("div",{className:"col-12",children:(0,D.jsxs)("div",{className:"grid",children:[(0,D.jsx)("div",{className:"col",children:(0,D.jsx)("label",{htmlFor:"Budget",children:"Budget"})}),(0,D.jsx)("div",{className:"col",children:(0,D.jsx)(x.R,{id:"Budget",name:"budget",value:S.budget,onValueChange:re})}),(0,D.jsx)("div",{className:"col-fixed p-fixed hidden-xs",children:"\xa0"}),(0,D.jsx)("div",{className:"col",children:(0,D.jsx)("label",{htmlFor:"ActualCost",children:"Actual Cost"})}),(0,D.jsx)("div",{className:"col",children:(0,D.jsx)(x.R,{id:"ActualCost",name:"actualCost",value:S.actualCost,onValueChange:re})})]})}),(0,D.jsx)("div",{className:"col-12",children:(0,D.jsxs)("div",{className:"grid",children:[(0,D.jsx)("div",{className:"col",children:(0,D.jsx)("label",{htmlFor:"ExpectedRevenue",children:"Expected Revenue"})}),(0,D.jsx)("div",{className:"col",children:(0,D.jsx)(x.R,{id:"ExpectedRevenue",name:"expectedRevenue",value:S.expectedRevenue,onValueChange:re})}),(0,D.jsx)("div",{className:"col-fixed p-fixed hidden-xs",children:"\xa0"}),(0,D.jsx)("div",{className:"col",children:(0,D.jsx)("label",{htmlFor:"ExpectedCost",children:"Expected Cost"})}),(0,D.jsx)("div",{className:"col",children:(0,D.jsx)(x.R,{id:"ExpectedCost",name:"expectedCost",value:S.expectedCost,onValueChange:re})})]})})]})]}),(0,D.jsx)("div",{className:"grid",children:(0,D.jsx)("div",{className:"col-12",children:"\xa0"})}),(0,D.jsxs)(u.Z,{children:[(0,D.jsx)("div",{className:"grid",children:(0,D.jsx)("div",{className:"col-12",children:(0,D.jsx)("h3",{children:"Objective"})})}),(0,D.jsx)("div",{className:"grid",children:(0,D.jsx)("div",{className:"col-12",children:(0,D.jsx)(j.g,{name:"objective",value:S.objective,onChange:re,autoResize:!0})})})]}),(0,D.jsx)("div",{className:"grid",children:(0,D.jsx)("div",{className:"col-12",children:"\xa0"})}),(0,D.jsxs)(u.Z,{children:[(0,D.jsx)("div",{className:"grid",children:(0,D.jsx)("div",{className:"col-12",children:(0,D.jsx)("h3",{children:"Description"})})}),(0,D.jsx)("div",{className:"grid",children:(0,D.jsx)("div",{className:"col-12",children:(0,D.jsx)(j.g,{name:"description",value:S.description,onChange:re,autoResize:!0})})})]}),(0,D.jsxs)("div",{className:"grid",children:[(0,D.jsx)("div",{className:"col-12",children:"\xa0"}),(0,D.jsxs)("div",{className:"col-12",children:[(0,D.jsx)(o.z,{icon:"pi pi-check",className:"p-button-rounded p-button-outlined",tooltip:"Save",disabled:!O,onClick:ce}),"\xa0 \xa0",(0,D.jsx)(o.z,{icon:"pi pi-times",className:"p-button-rounded p-button-outlined",tooltip:"Back to List",onClick:de})]})]})]})}},8284:function(e,s,a){a.d(s,{A8:function(){return c},HN:function(){return i},Nh:function(){return d},YM:function(){return r},xN:function(){return n}});var i=/^([a-zA-Z0-9_\-+'])+(\.[a-zA-Z0-9_\-+']+)*@((([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,15}))\s*$/i,n=function(e){return e?new Date(e).toISOString():""},r=function(e){return e?new Date(e):void 0},c=function(e){var s=parseFloat(e);return isNaN(s)?void 0:s},d=function(e,s,a,i){var n=c(a);if(!n)return a;var r=i.find((function(s){return s.id===e}));return r&&r.conversionRate&&!isNaN(r.conversionRate)&&r.conversionRate>0&&(n/=r.conversionRate),(r=i.find((function(e){return e.id===s})))&&r.conversionRate&&!isNaN(r.conversionRate)&&r.conversionRate>0&&(n*=r.conversionRate),parseFloat(n.toFixed(2))}},8170:function(e,s,a){a.d(s,{X:function(){return c}});var i=a(2791),n=a(5036);function r(){return r=Object.assign?Object.assign.bind():function(e){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e},r.apply(this,arguments)}var c=i.memo(i.forwardRef((function(e,s){var a=n.A.getPTI(e);return i.createElement("svg",r({ref:s,width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a),i.createElement("path",{d:"M4.38708 13C4.28408 13.0005 4.18203 12.9804 4.08691 12.9409C3.99178 12.9014 3.9055 12.8433 3.83313 12.7701C3.68634 12.6231 3.60388 12.4238 3.60388 12.2161C3.60388 12.0084 3.68634 11.8091 3.83313 11.6622L8.50507 6.99022L3.83313 2.31827C3.69467 2.16968 3.61928 1.97313 3.62287 1.77005C3.62645 1.56698 3.70872 1.37322 3.85234 1.22959C3.99596 1.08597 4.18972 1.00371 4.3928 1.00012C4.59588 0.996539 4.79242 1.07192 4.94102 1.21039L10.1669 6.43628C10.3137 6.58325 10.3962 6.78249 10.3962 6.99022C10.3962 7.19795 10.3137 7.39718 10.1669 7.54416L4.94102 12.7701C4.86865 12.8433 4.78237 12.9014 4.68724 12.9409C4.59212 12.9804 4.49007 13.0005 4.38708 13Z",fill:"currentColor"}))})));c.displayName="ChevronRightIcon"}}]);
//# sourceMappingURL=7237.526a4d89.chunk.js.map