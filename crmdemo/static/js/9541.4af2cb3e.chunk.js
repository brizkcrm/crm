"use strict";(self.webpackChunkcrmdemo1=self.webpackChunkcrmdemo1||[]).push([[9541],{9541:function(e,i,s){s.r(i),s.d(i,{default:function(){return V}});var n=s(4165),d=s(5861),l=s(3433),c=s(4942),a=s(1413),t=s(9439),r=s(2791),o=s(7689),h=s(919),u=s(4045),x=s(9585),m=s(1063),v=s(5134),j=s(9856),p=s(3014),g=s(5103),N=s(8218),f=s(5533),b=s(1945),C=s(6646),y=s(5048),S=s(9777),A=s(1067),Z=s(3770),I=s(8715),w=s(670),P=s(2358),F=s(1443),D=s(8457),T=s(7370),L=s(4261),k=s(3585),R=s(8284),O=s(3396),B=s(184),z=function(e){var i=function(e){var i;return(0,B.jsx)("div",{className:"text-right",children:null===e||void 0===e||null===(i=e.listPrice)||void 0===i?void 0:i.toFixed(2)})},s=function(e){return"".concat(null===e||void 0===e?void 0:e.discountType," ").concat(null===e||void 0===e?void 0:e.discount)},n=function(e){var i;return(0,B.jsx)("div",{className:"text-right",children:null===e||void 0===e||null===(i=e.total)||void 0===i?void 0:i.toFixed(2)})},d=function(e){var i,s,n;return(0,B.jsxs)("div",{className:"grid text-right",children:[(0,B.jsx)("div",{className:"col-7",children:"\xa0"}),(0,B.jsx)("div",{className:"col-5",children:(0,B.jsxs)("div",{className:"grid",children:[(0,B.jsx)("div",{className:"col-12",children:(0,B.jsxs)("div",{className:"grid",children:[(0,B.jsx)("div",{className:"col",children:"Items Total:"}),(0,B.jsx)("div",{className:"col",children:null===(i=e.subTotal)||void 0===i?void 0:i.toFixed(2)})]})}),(0,B.jsx)("div",{className:"col-12",children:(0,B.jsxs)("div",{className:"grid",children:[(0,B.jsx)("div",{className:"col",children:"Tax:"}),(0,B.jsx)("div",{className:"col",children:null===(s=e.taxTotal)||void 0===s?void 0:s.toFixed(2)})]})}),(0,B.jsx)("div",{className:"col-12",children:(0,B.jsxs)("div",{className:"grid",children:[(0,B.jsxs)("div",{className:"col",children:["Grand Total: (in ",e.currencyId,")"]}),(0,B.jsx)("div",{className:"col",children:null===(n=e.total)||void 0===n?void 0:n.toFixed(2)})]})})]})})]})};return(0,B.jsx)(B.Fragment,{children:function(){var l;if(""===e.item.id)return null;var c=(0,a.Z)({},e.item);if(e.accounts){var t=e.accounts.find((function(e){return e.id===c.accountId}));t&&(c.accountId=t.name)}if(e.currencies){var r=e.currencies.find((function(e){return e.id===c.currencyId}));r&&(c.currencyId=r.symbol)}return e.products&&e.item.items&&(c.items=e.item.items.map((function(i){var s=(0,a.Z)({},i),n=e.products.find((function(e){return e.id===i.productId}));return n&&(s.productId=n.name),s}))),(0,B.jsxs)("div",{className:"grid p-5",children:[(0,B.jsx)("div",{className:"col-12",children:(0,B.jsx)("h3",{children:"Invoice"})}),(0,B.jsx)("div",{className:"col-12",children:(0,B.jsxs)("div",{className:"grid",children:[(0,B.jsx)("div",{className:"col",children:(0,B.jsx)("label",{htmlFor:"Subject",children:"Subject:"})}),(0,B.jsx)("div",{className:"col",children:c.subject}),(0,B.jsx)("div",{className:"col-fixed p-fixed hidden-xs",children:"\xa0"}),(0,B.jsx)("div",{className:"col",children:(0,B.jsx)("label",{htmlFor:"Opportunity",children:"Customer Name:"})}),(0,B.jsx)("div",{className:"col",children:c.accountId})]})}),(0,B.jsx)("div",{className:"col-12",children:(0,B.jsxs)("div",{className:"grid",children:[(0,B.jsx)("div",{className:"col",children:(0,B.jsx)("label",{htmlFor:"CustomerNo",children:"Issued Date:"})}),(0,B.jsx)("div",{className:"col",children:(new Date).toLocaleDateString()}),(0,B.jsx)("div",{className:"col-fixed p-fixed hidden-xs",children:"\xa0"}),(0,B.jsx)("div",{className:"col",children:(0,B.jsx)("label",{htmlFor:"Account",children:"Due Date:"})}),(0,B.jsx)("div",{className:"col",children:null===(l=(0,R.YM)(c.dueDate))||void 0===l?void 0:l.toLocaleDateString()})]})}),(0,B.jsx)("div",{className:"col-12",children:(0,B.jsxs)("div",{className:"grid",children:[(0,B.jsx)("div",{className:"col",children:(0,B.jsx)("label",{htmlFor:"PurchaseOrder",children:"Billing Address:"})}),(0,B.jsx)("div",{className:"col",children:"".concat(c.billingAddressStreet," ").concat(c.billingAddressCity,", ").concat(c.billingAddressState," ").concat(c.billingAddressPostalcode," ").concat(c.billingAddressCountry)}),(0,B.jsx)("div",{className:"col-fixed p-fixed hidden-xs",children:"\xa0"}),(0,B.jsx)("div",{className:"col",children:(0,B.jsx)("label",{htmlFor:"Contact",children:"Shipping Address:"})}),(0,B.jsx)("div",{className:"col",children:"".concat(c.shippingAddressStreet," ").concat(c.shippingAddressCity,", ").concat(c.shippingAddressState," ").concat(c.shippingAddressPostalcode," ").concat(c.shippingAddressCountry)})]})}),(0,B.jsx)("div",{className:"col-12",children:(0,B.jsxs)(v.w,{value:c.items,showGridlines:!0,footer:d(c),children:[(0,B.jsx)(m.s,{field:"productId",header:"Product"}),(0,B.jsx)(m.s,{field:"quantity",header:"Quantity"}),(0,B.jsx)(m.s,{field:"listPrice",header:"Selling Price",body:i}),(0,B.jsx)(m.s,{field:"discountType",header:"Discount",body:s}),(0,B.jsx)(m.s,{field:"total",header:"Total",body:n})]})}),(0,B.jsx)("div",{className:"col-12",children:(0,B.jsx)("h3",{children:"Description"})}),(0,B.jsx)("div",{className:"col-12",children:c.description}),(0,B.jsx)("div",{className:"col-12",children:(0,B.jsx)("h3",{children:"Terms & Conditions"})}),(0,B.jsx)("div",{className:"col-12",children:c.termsConditions})]})}()})},E=s(1146),V=function(){var e,i,s,V="/invoices",q=(0,o.s0)(),U=(0,r.useState)("Create"),$=(0,t.Z)(U,2),G=$[0],M=$[1],Y=(0,r.useState)({id:"",subject:"",salesOrderId:"",customerNo:"",opportunityId:"",contactId:"",invoiceDate:"",dueDate:"",purchaseOrder:"",exciseDuty:0,salesCommission:0,accountId:"",accountName:"",status:"",currencyId:"",assignedUserId:"",assignedUserLastName:"",termsConditions:"",subTotal:0,taxTotal:0,total:0,billingAddressStreet:"",billingAddressCity:"",billingAddressState:"",billingAddressPostalcode:"",billingAddressCountry:"",shippingAddressStreet:"",shippingAddressCity:"",shippingAddressState:"",shippingAddressPostalcode:"",shippingAddressCountry:"",description:"",items:[]}),W=(0,t.Z)(Y,2),_=W[0],H=W[1],Q=(0,r.useState)(!1),J=(0,t.Z)(Q,2),K=J[0],X=J[1],ee=(0,r.useState)(!1),ie=(0,t.Z)(ee,2),se=ie[0],ne=ie[1],de=(0,r.useState)({}),le=(0,t.Z)(de,2),ce=le[0],ae=le[1],te=(0,r.useState)(!1),re=(0,t.Z)(te,2),oe=re[0],he=re[1],ue=(0,r.useState)(""),xe=(0,t.Z)(ue,2),me=xe[0],ve=xe[1],je=(0,r.useState)([]),pe=(0,t.Z)(je,2),ge=pe[0],Ne=pe[1],fe=(0,o.UO)(),be=(0,r.useRef)(!0),Ce=(0,r.useRef)(null),ye=(0,S.C)((function(e){return[e.invoices.invoice,e.invoices.isFetching,e.invoices.isError,e.accounts.accounts,e.contacts.contacts,e.currencies.currencies,e.invoices.invoices,e.opportunities.opportunities,e.products.products,e.salesOrders.salesOrders,e.users.users,e.users.isProfile,e.users.profile]}),y.wU),Se=(0,t.Z)(ye,13),Ae=Se[0],Ze=Se[1],Ie=Se[2],we=Se[3],Pe=Se[4],Fe=Se[5],De=Se[6],Te=Se[7],Le=Se[8],ke=Se[9],Re=Se[10],Oe=Se[11],Be=Se[12],ze=(0,S.T)();(0,r.useEffect)((function(){if(be.current)if(be.current=!1,ze(A.$h.getAccounts()),ze(Z.S8.getContacts()),ze(I.gC.getCurrencies()),ze(P.Yg.getOpportunities()),ze(F.Jh.getProducts()),ze(D.lW.getSalesOrders()),ze(T.hI.getUsers()),"edit"===fe.mode){M("Edit");var e=fe.id;e&&ze(w.ir.getInvoiceById(e))}else H((0,a.Z)((0,a.Z)({},_),{},{termsConditions:k._1}))}),[]),(0,r.useEffect)((function(){"edit"!==fe.mode&&Oe&&Be&&Be.currencyId&&""===_.currencyId&&Be.currencyId!==_.currencyId&&H((0,a.Z)((0,a.Z)({},_),{},{currencyId:Be.currencyId}))}),[fe,Oe,Be,_]),(0,r.useEffect)((function(){"edit"!==fe.mode||_.id===(null===Ae||void 0===Ae?void 0:Ae.id)||Ze||Ie||H(Ae)}),[fe,_,Ae,Ze,Ie]),(0,r.useEffect)((function(){if(Le&&Le.length>0){var e=Le.filter((function(e){return!!e.active}));e.length>0&&Ne(e)}}),[Le]);var Ee=(0,r.useCallback)((function(e){var i=!0;return 0===_.id.length?De.find((function(i){var s;return(null===(s=i.subject)||void 0===s?void 0:s.toLowerCase())===(null===e||void 0===e?void 0:e.toLowerCase())}))&&(i=!1):De.find((function(i){var s;return(null===(s=i.subject)||void 0===s?void 0:s.toLowerCase())===(null===e||void 0===e?void 0:e.toLowerCase())&&i.id!==_.id}))&&(i=!1),i}),[_.id,De]);(0,r.useEffect)((function(){K&&ne((_.subject||"").trim().length>0&&Ee(_.subject||"")&&(_.currencyId||"").trim().length>0)}),[K,_,Ee]);var Ve=function(e){X(!0);var i=e.target,s=i.name,n=i.value;if("dueDate"===s)H((0,a.Z)((0,a.Z)({},_),{},(0,c.Z)({},s,(0,R.xN)(n))));else if("accountId"===s){var d,l=we.find((function(e){return e.id===n}));if(l)H((0,a.Z)((0,a.Z)({},_),{},(d={},(0,c.Z)(d,s,n),(0,c.Z)(d,"accountName",l.name),d)))}else if("currencyId"===s)H((0,a.Z)((0,a.Z)({},_),{},(0,c.Z)({},s,n),function(e){for(var i=0,s=0,n=_.currencyId?_.currencyId:"",d=_.items||[],l=[],c=0;c<d.length;c++){var t=(0,a.Z)({},d[c]);t.purchaseCost=(0,R.Nh)(n,e,t.purchaseCost,Fe),t.listPrice=(0,R.Nh)(n,e,t.listPrice,Fe),"$"===t.discountType&&(t.discount=(0,R.Nh)(n,e,t.discount||0,Fe)),t.total=(0,R.Nh)(n,e,t.total,Fe),t.tax=(0,R.Nh)(n,e,t.tax,Fe),l.push(t),i+=t.total,s=t.tax}return{subTotal:i,taxTotal:s,total:i+s,items:l}}(e.target.value)));else if("assignedUserId"===s){var t,r=Re.find((function(e){return e.id===n}));if(r)H((0,a.Z)((0,a.Z)({},_),{},(t={},(0,c.Z)(t,s,n),(0,c.Z)(t,"assignedUserLastName",r.lastName),t)))}else H((0,a.Z)((0,a.Z)({},_),{},(0,c.Z)({},s,n)));if("subject"===s){var o=Ee(n);ae((0,a.Z)((0,a.Z)({},ce),{},(0,c.Z)({subjectInvalid:!o},s,!n||0===n.toString().trim().length)))}},qe=function(){X(!0),H((0,a.Z)((0,a.Z)({},_),{},{shippingAddressStreet:_.billingAddressStreet,shippingAddressCity:_.billingAddressCity,shippingAddressState:_.billingAddressState,shippingAddressPostalcode:_.billingAddressPostalcode,shippingAddressCountry:_.billingAddressCountry}))},Ue=function(){X(!0),H((0,a.Z)((0,a.Z)({},_),{},{billingAddressStreet:_.shippingAddressStreet,billingAddressCity:_.shippingAddressCity,billingAddressState:_.shippingAddressState,billingAddressPostalcode:_.shippingAddressPostalcode,billingAddressCountry:_.shippingAddressCountry}))},$e=function(e){return(0,B.jsx)(p.L,{value:e.value,options:ge,optionLabel:"name",optionValue:"id",onChange:function(i){return function(e,i){var s=ge.find((function(e){return e.id===i.value}));if(s&&_){var n=e.rowData,d=e.rowIndex;n.listPrice=s.unitPrice;var c=(0,l.Z)(_.items||[]);c[d]=n,H((0,a.Z)((0,a.Z)({},_),{},{items:c}))}e.editorCallback(i.value)}(e,i)},placeholder:"Select a Product",itemTemplate:function(e){return(0,B.jsx)("span",{children:e.name})}})},Ge=function(e){var i,s;switch(e.value){case"%":s="% Price";break;case"$":s="Direct Price Reduction";break;default:s="Zero Discount"}return(0,B.jsxs)("div",{className:"field-checkbox m-0",children:[(0,B.jsx)(C.x,{value:s,options:O.$v,optionValue:"value",onChange:function(i){return function(e,i){var s;switch(i.value){case"% Price":s="%";break;case"Direct Price Reduction":s="$";break;default:s=""}e.editorCallback(s)}(e,i)},tooltip:s}),"\xa0","Zero Discount"!==s&&(0,B.jsx)(f.R,{value:null===(i=e.rowData)||void 0===i?void 0:i.discount,onValueChange:function(i){return function(e,i){var s=e.rowData,n=e.rowIndex;s.discount=i;var d=(0,l.Z)(_.items||[]);d[n]=s,H((0,a.Z)((0,a.Z)({},_),{},{items:d}))}(e,i.value)},size:9})]})},Me=function(e){return(0,B.jsx)(f.R,{value:e.value,onValueChange:function(i){return e.editorCallback(i.value)},size:9})},Ye=function(e){ve(e.id),he(!0)},We=function(){he(!1)},_e=function(){var e=(0,d.Z)((0,n.Z)().mark((function e(){var i,s,d,l,c,t,r,o,h;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:me&&(s=null===(i=_.items)||void 0===i?void 0:i.filter((function(e){return e.id!==me})))&&(X(!0),l=0,c=0,(t=null===(d=_.items)||void 0===d?void 0:d.find((function(e){return e.id===me})))&&(l=t.total||0,c=t.tax||0),r=(_.subTotal||0)-l,o=(_.taxTotal||0)-c,h=r+o,H((0,a.Z)((0,a.Z)({},_),{},{subTotal:r,taxTotal:o,total:h,items:s}))),We(),ve("");case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),He=(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(h.z,{label:"No",icon:"pi pi-times",className:"p-button-text",onClick:We}),(0,B.jsx)(h.z,{label:"Yes",icon:"pi pi-check",className:"p-button-text",onClick:_e})]}),Qe=(0,B.jsxs)("div",{className:"grid text-right",children:[(0,B.jsx)("div",{className:"col-9",children:"\xa0"}),(0,B.jsx)("div",{className:"col-3",children:(0,B.jsxs)("div",{className:"grid",children:[(0,B.jsx)("div",{className:"col-12",children:(0,B.jsxs)("div",{className:"grid",children:[(0,B.jsx)("div",{className:"col",children:"Items Total:"}),(0,B.jsx)("div",{className:"col",children:null===(e=_.subTotal)||void 0===e?void 0:e.toFixed(2)})]})}),(0,B.jsx)("div",{className:"col-12",children:(0,B.jsxs)("div",{className:"grid",children:[(0,B.jsx)("div",{className:"col",children:"Tax:"}),(0,B.jsx)("div",{className:"col",children:null===(i=_.taxTotal)||void 0===i?void 0:i.toFixed(2)})]})}),(0,B.jsx)("div",{className:"col-12",children:(0,B.jsxs)("div",{className:"grid",children:[(0,B.jsx)("div",{className:"col",children:"Grand Total:"}),(0,B.jsx)("div",{className:"col",children:null===(s=_.total)||void 0===s?void 0:s.toFixed(2)})]})})]})})]}),Je=function(){var e=(0,d.Z)((0,n.Z)().mark((function e(){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"Edit"!==G&&(_.id=(0,L.Z)()),ze(w.ir.updateInvoice(_)),setTimeout((function(){ze(w.ir.getInvoices())}),300),q(V);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ke=function(){var e=(0,d.Z)((0,n.Z)().mark((function e(){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:q(V);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Xe=(0,E.useReactToPrint)({content:function(){return Ce.current}});return(0,B.jsxs)(B.Fragment,{children:[(0,B.jsxs)("div",{children:[(0,B.jsxs)("h3",{className:"caption",children:["Invoice: ",G]}),(0,B.jsx)("div",{className:"grid",children:(0,B.jsxs)("div",{className:"col-12",children:[(0,B.jsx)("span",{className:"field-required",children:"*"})," - Required field"]})}),(0,B.jsxs)(u.Z,{children:[(0,B.jsx)("div",{className:"grid",children:(0,B.jsx)("div",{className:"col-12",children:(0,B.jsx)("h3",{children:"Invoice"})})}),(0,B.jsxs)("div",{className:"grid",children:[(0,B.jsx)("div",{className:"col-12",children:(0,B.jsxs)("div",{className:"grid",children:[(0,B.jsx)("div",{className:"col",children:(0,B.jsxs)("label",{htmlFor:"Subject",children:["Subject ",(0,B.jsx)("span",{className:"field-required",children:"*"})]})}),(0,B.jsxs)("div",{className:"col",children:[(0,B.jsx)(g.o,{id:"Subject",name:"subject",maxLength:100,placeholder:"Subject",value:_.subject,onChange:Ve}),(null===ce||void 0===ce?void 0:ce.subject)&&(0,B.jsx)(b.v,{severity:"error",text:"Subject is required."}),(null===ce||void 0===ce?void 0:ce.subjectInvalid)&&(0,B.jsx)(b.v,{severity:"error",text:"Subject already exists."})]}),(0,B.jsx)("div",{className:"col-fixed p-fixed hidden-xs",children:"\xa0"}),(0,B.jsx)("div",{className:"col",children:(0,B.jsx)("label",{htmlFor:"SalesOrder",children:"Sales Order"})}),(0,B.jsx)("div",{className:"col",children:(0,B.jsx)("div",{className:"p-fixed-switch",children:(0,B.jsx)(p.L,{id:"SalesOrder",name:"salesOrderId",options:ke,optionLabel:"subject",optionValue:"id",value:_.salesOrderId,onChange:Ve,className:"p-combobox"})})})]})}),(0,B.jsx)("div",{className:"col-12",children:(0,B.jsxs)("div",{className:"grid",children:[(0,B.jsx)("div",{className:"col",children:(0,B.jsx)("label",{htmlFor:"CustomerNo",children:"Customer No"})}),(0,B.jsx)("div",{className:"col",children:(0,B.jsx)(g.o,{id:"CustomerNo",name:"customerNo",maxLength:100,value:_.customerNo,onChange:Ve})}),(0,B.jsx)("div",{className:"col-fixed p-fixed hidden-xs",children:"\xa0"}),(0,B.jsx)("div",{className:"col",children:(0,B.jsx)("label",{htmlFor:"Account",children:"Account"})}),(0,B.jsx)("div",{className:"col",children:(0,B.jsx)(p.L,{id:"Account",name:"accountId",options:we,optionLabel:"name",optionValue:"id",value:_.accountId,onChange:Ve,className:"p-combobox"})})]})}),(0,B.jsx)("div",{className:"col-12",children:(0,B.jsxs)("div",{className:"grid",children:[(0,B.jsx)("div",{className:"col",children:(0,B.jsx)("label",{htmlFor:"PurchaseOrder",children:"Purchase Order"})}),(0,B.jsx)("div",{className:"col",children:(0,B.jsx)(g.o,{id:"PurchaseOrder",name:"purchaseOrder",maxLength:200,value:_.purchaseOrder,onChange:Ve})}),(0,B.jsx)("div",{className:"col-fixed p-fixed hidden-xs",children:"\xa0"}),(0,B.jsx)("div",{className:"col",children:(0,B.jsx)("label",{htmlFor:"Contact",children:"Contact"})}),(0,B.jsx)("div",{className:"col",children:(0,B.jsx)(p.L,{id:"Contact",name:"contactId",options:Pe,optionLabel:"lastName",optionValue:"id",value:_.contactId,onChange:Ve,className:"p-combobox"})})]})}),(0,B.jsx)("div",{className:"col-12",children:(0,B.jsxs)("div",{className:"grid",children:[(0,B.jsx)("div",{className:"col",children:(0,B.jsx)("label",{htmlFor:"InvoiceDate",children:"Invoice Date"})}),(0,B.jsx)("div",{className:"col",children:(0,B.jsx)(x.f,{id:"InvoiceDate",name:"invoiceDate",value:(0,R.YM)(_.invoiceDate),onChange:Ve,showButtonBar:!0,showIcon:!0,className:"p-combobox"})}),(0,B.jsx)("div",{className:"col-fixed p-fixed hidden-xs",children:"\xa0"}),(0,B.jsx)("div",{className:"col",children:(0,B.jsx)("label",{htmlFor:"DueDate",children:"Due Date"})}),(0,B.jsx)("div",{className:"col",children:(0,B.jsx)(x.f,{id:"DueDate",name:"dueDate",value:(0,R.YM)(_.dueDate),onChange:Ve,showButtonBar:!0,showIcon:!0,className:"p-combobox"})})]})}),(0,B.jsx)("div",{className:"col-12",children:(0,B.jsxs)("div",{className:"grid",children:[(0,B.jsx)("div",{className:"col",children:(0,B.jsx)("label",{htmlFor:"ExciseDuty",children:"Excise Duty"})}),(0,B.jsx)("div",{className:"col",children:(0,B.jsx)(f.R,{id:"ExciseDuty",name:"exciseDuty",value:_.exciseDuty,onValueChange:Ve})}),(0,B.jsx)("div",{className:"col-fixed p-fixed hidden-xs",children:"\xa0"}),(0,B.jsx)("div",{className:"col",children:(0,B.jsx)("label",{htmlFor:"Status",children:"Status"})}),(0,B.jsx)("div",{className:"col",children:(0,B.jsx)(p.L,{id:"Status",name:"status",options:O.Gh,value:_.status,onChange:Ve,className:"p-combobox"})})]})}),(0,B.jsx)("div",{className:"col-12",children:(0,B.jsxs)("div",{className:"grid",children:[(0,B.jsx)("div",{className:"col",children:(0,B.jsx)("label",{htmlFor:"SalesCommission",children:"Sales Commission"})}),(0,B.jsx)("div",{className:"col",children:(0,B.jsx)(f.R,{id:"SalesCommission",name:"salesCommission",value:_.salesCommission,onValueChange:Ve})}),(0,B.jsx)("div",{className:"col-fixed p-fixed hidden-xs",children:"\xa0"}),(0,B.jsx)("div",{className:"col",children:(0,B.jsx)("label",{htmlFor:"Opportunity",children:"Opportunity"})}),(0,B.jsx)("div",{className:"col",children:(0,B.jsx)("div",{className:"p-fixed-switch",children:(0,B.jsx)(p.L,{id:"Opportunity",name:"opportunityId",options:Te,optionLabel:"name",optionValue:"id",value:_.opportunityId,onChange:Ve,className:"p-combobox"})})})]})}),(0,B.jsx)("div",{className:"col-12",children:(0,B.jsxs)("div",{className:"grid",children:[(0,B.jsx)("div",{className:"col",children:(0,B.jsxs)("label",{htmlFor:"Currency",children:["Currency ",(0,B.jsx)("span",{className:"field-required",children:"*"})]})}),(0,B.jsxs)("div",{className:"col",children:[(0,B.jsx)(p.L,{id:"Currency",name:"currencyId",options:Fe,optionLabel:"name",optionValue:"id",value:_.currencyId,onChange:Ve,className:"p-combobox"}),(null===ce||void 0===ce?void 0:ce.currencyId)&&(0,B.jsx)(b.v,{severity:"error",text:"Currency is required."})]}),(0,B.jsx)("div",{className:"col-fixed p-fixed hidden-xs",children:"\xa0"}),(0,B.jsx)("div",{className:"col",children:(0,B.jsx)("label",{htmlFor:"AssignedTo",children:"Assigned To"})}),(0,B.jsx)("div",{className:"col",children:(0,B.jsx)(p.L,{id:"AssignedTo",name:"assignedUserId",options:Re,optionLabel:"lastName",optionValue:"id",value:_.assignedUserId,onChange:Ve,className:"p-combobox"})})]})})]})]}),(0,B.jsx)("div",{className:"grid",children:(0,B.jsx)("div",{className:"col-12",children:"\xa0"})}),(0,B.jsxs)(u.Z,{children:[(0,B.jsx)("div",{className:"grid",children:(0,B.jsx)("div",{className:"col-12",children:(0,B.jsx)("h3",{children:"Address"})})}),(0,B.jsxs)("div",{className:"grid",children:[(0,B.jsx)("div",{className:"col",children:(0,B.jsx)("h4",{children:"Billing Address"})}),(0,B.jsx)("div",{className:"col-fixed p-fixed-10 hidden-xs",children:"\xa0"}),(0,B.jsx)("div",{className:"col hidden-xs",children:(0,B.jsx)("h4",{children:"Shipping Address"})})]}),(0,B.jsxs)("div",{className:"grid",children:[(0,B.jsx)("div",{className:"col-12",children:(0,B.jsxs)("div",{className:"grid",children:[(0,B.jsx)("div",{className:"col",children:(0,B.jsx)("label",{htmlFor:"BillingStreet",children:"Street"})}),(0,B.jsx)("div",{className:"col",children:(0,B.jsx)(g.o,{id:"BillingStreet",name:"billingAddressStreet",maxLength:150,value:_.billingAddressStreet,onChange:Ve})}),(0,B.jsx)("div",{className:"col-fixed p-fixed-10 hidden-xs",children:"\xa0"}),(0,B.jsx)("div",{className:"col hidden-xs",children:(0,B.jsx)("label",{htmlFor:"ShippingStreet1",children:"Street"})}),(0,B.jsx)("div",{className:"col hidden-xs",children:(0,B.jsx)(g.o,{id:"ShippingStreet1",name:"shippingAddressStreet",maxLength:150,value:_.shippingAddressStreet,onChange:Ve})})]})}),(0,B.jsx)("div",{className:"col-12",children:(0,B.jsxs)("div",{className:"grid",children:[(0,B.jsx)("div",{className:"col",children:(0,B.jsx)("label",{htmlFor:"BillingCity",children:"City"})}),(0,B.jsx)("div",{className:"col",children:(0,B.jsx)(g.o,{id:"BillingCity",name:"billingAddressCity",maxLength:100,value:_.billingAddressCity,onChange:Ve})}),(0,B.jsx)("div",{className:"col-fixed p-fixed-10 hidden-xs",children:(0,B.jsx)(h.z,{icon:"pi pi-arrow-circle-right",className:"p-button-rounded p-button-text p-button-lg",tooltip:"Copy Billing Address",onClick:qe})}),(0,B.jsx)("div",{className:"col hidden-xs",children:(0,B.jsx)("label",{htmlFor:"ShippingCity1",children:"City"})}),(0,B.jsx)("div",{className:"col hidden-xs",children:(0,B.jsx)(g.o,{id:"ShippingCity1",name:"shippingAddressCity",maxLength:100,value:_.shippingAddressCity,onChange:Ve})})]})}),(0,B.jsx)("div",{className:"col",children:(0,B.jsxs)("div",{className:"grid",children:[(0,B.jsx)("div",{className:"col",children:(0,B.jsx)("label",{htmlFor:"BillingState",children:"State"})}),(0,B.jsx)("div",{className:"col",children:(0,B.jsx)(g.o,{id:"BillingState",name:"billingAddressState",maxLength:100,value:_.billingAddressState,onChange:Ve})}),(0,B.jsx)("div",{className:"col-fixed p-fixed-10 hidden-xs",children:"\xa0"}),(0,B.jsx)("div",{className:"col hidden-xs",children:(0,B.jsx)("label",{htmlFor:"ShippingState1",children:"State"})}),(0,B.jsx)("div",{className:"col hidden-xs",children:(0,B.jsx)(g.o,{id:"ShippingState1",name:"shippingAddressState",maxLength:100,value:_.shippingAddressState,onChange:Ve})})]})}),(0,B.jsx)("div",{className:"col-12",children:(0,B.jsxs)("div",{className:"grid",children:[(0,B.jsx)("div",{className:"col",children:(0,B.jsx)("label",{htmlFor:"BillingPostalCode",children:"Postal Code"})}),(0,B.jsx)("div",{className:"col",children:(0,B.jsx)(g.o,{id:"BillingPostalCode",name:"billingAddressPostalcode",maxLength:20,value:_.billingAddressPostalcode,onChange:Ve})}),(0,B.jsx)("div",{className:"col-fixed p-fixed-10 hidden-xs",children:(0,B.jsx)(h.z,{icon:"pi pi-arrow-circle-left",className:"p-button-rounded p-button-text p-button-lg",tooltip:"Copy Shipping Address",onClick:Ue})}),(0,B.jsx)("div",{className:"col hidden-xs",children:(0,B.jsx)("label",{htmlFor:"ShippingPostalCode1",children:"Postal Code"})}),(0,B.jsx)("div",{className:"col hidden-xs",children:(0,B.jsx)(g.o,{id:"ShippingPostalCode1",name:"shippingAddressPostalcode",type:"text",maxLength:20,value:_.shippingAddressPostalcode,onChange:Ve})})]})}),(0,B.jsx)("div",{className:"col-12",children:(0,B.jsxs)("div",{className:"grid",children:[(0,B.jsx)("div",{className:"col",children:(0,B.jsx)("label",{htmlFor:"BillingCountry",children:"Country"})}),(0,B.jsx)("div",{className:"col",children:(0,B.jsx)(g.o,{id:"BillingCountry",name:"billingAddressCountry",maxLength:255,value:_.billingAddressCountry,onChange:Ve})}),(0,B.jsx)("div",{className:"col-fixed p-fixed-10 hidden-xs",children:"\xa0"}),(0,B.jsx)("div",{className:"col hidden-xs",children:(0,B.jsx)("label",{htmlFor:"ShippingCountry1",children:"Country"})}),(0,B.jsx)("div",{className:"col hidden-xs",children:(0,B.jsx)(g.o,{id:"ShippingCountry1",name:"shippingAddressCountry",maxLength:255,value:_.shippingAddressCountry,onChange:Ve})})]})}),(0,B.jsx)("div",{className:"col-12 hidden-sm hidden-md hidden-lg",children:(0,B.jsxs)("div",{className:"grid",children:[(0,B.jsx)("div",{className:"col",children:(0,B.jsx)(h.z,{icon:"pi pi-arrow-circle-down",className:"p-button-rounded p-button-text p-button-lg",tooltip:"Copy Billing Address",onClick:qe})}),(0,B.jsx)("div",{className:"col",children:(0,B.jsx)(h.z,{icon:"pi pi-arrow-circle-up",className:"p-button-rounded p-button-text p-button-lg",tooltip:"Copy Shipping Address",onClick:Ue})})]})}),(0,B.jsx)("div",{className:"col-12 hidden-sm hidden-md hidden-lg",children:(0,B.jsx)("h4",{children:"Shipping Address"})}),(0,B.jsx)("div",{className:"col-12 hidden-sm hidden-md hidden-lg",children:(0,B.jsxs)("div",{className:"grid",children:[(0,B.jsx)("div",{className:"col-12",children:(0,B.jsx)("label",{htmlFor:"ShippingStreet2",children:"Street"})}),(0,B.jsx)("div",{className:"col-12",children:(0,B.jsx)(g.o,{id:"ShippingStreet2",name:"shippingAddressStreet",maxLength:150,value:_.shippingAddressStreet,onChange:Ve})})]})}),(0,B.jsx)("div",{className:"col-12 hidden-sm hidden-md hidden-lg",children:(0,B.jsxs)("div",{className:"grid",children:[(0,B.jsx)("div",{className:"col-12",children:(0,B.jsx)("label",{htmlFor:"ShippingCity2",children:"City"})}),(0,B.jsx)("div",{className:"col-12",children:(0,B.jsx)(g.o,{id:"ShippingCity2",name:"shippingAddressCity",maxLength:100,value:_.shippingAddressCity,onChange:Ve})})]})}),(0,B.jsx)("div",{className:"col-12 hidden-sm hidden-md hidden-lg",children:(0,B.jsxs)("div",{className:"grid",children:[(0,B.jsx)("div",{className:"col-12",children:(0,B.jsx)("label",{htmlFor:"ShippingState2",children:"State"})}),(0,B.jsx)("div",{className:"col-12",children:(0,B.jsx)(g.o,{id:"ShippingState2",name:"shippingAddressState",maxLength:100,value:_.shippingAddressState,onChange:Ve})})]})}),(0,B.jsx)("div",{className:"col-12 hidden-sm hidden-md hidden-lg",children:(0,B.jsxs)("div",{className:"grid",children:[(0,B.jsx)("div",{className:"col-12",children:(0,B.jsx)("label",{htmlFor:"ShippingPostalCode2",children:"Postal Code"})}),(0,B.jsx)("div",{className:"col-12",children:(0,B.jsx)(g.o,{id:"ShippingPostalCode2",name:"shippingAddressPostalcode",maxLength:20,value:_.shippingAddressPostalcode,onChange:Ve})})]})}),(0,B.jsx)("div",{className:"col-12 hidden-sm hidden-md hidden-lg",children:(0,B.jsxs)("div",{className:"grid",children:[(0,B.jsx)("div",{className:"col-12",children:(0,B.jsx)("label",{htmlFor:"ShippingCountry2",children:"Country"})}),(0,B.jsx)("div",{className:"col-12",children:(0,B.jsx)(g.o,{id:"ShippingCountry2",name:"shippingAddressCountry",maxLength:255,value:_.shippingAddressCountry,onChange:Ve})})]})})]})]}),(0,B.jsx)("div",{className:"grid",children:(0,B.jsx)("div",{className:"col-12",children:"\xa0"})}),(0,B.jsxs)(u.Z,{children:[(0,B.jsx)("div",{className:"grid",children:(0,B.jsx)("div",{className:"col-12",children:(0,B.jsx)("h3",{children:"Terms & Conditions"})})}),(0,B.jsx)("div",{className:"grid",children:(0,B.jsx)("div",{className:"col-12",children:(0,B.jsx)(N.g,{name:"termsConditions",value:_.termsConditions,onChange:Ve,style:{width:280},autoResize:!0})})})]}),(0,B.jsx)("div",{className:"grid",children:(0,B.jsx)("div",{className:"col-12",children:"\xa0"})}),(0,B.jsxs)(u.Z,{children:[(0,B.jsx)("div",{className:"grid",children:(0,B.jsx)("div",{className:"col-12",children:(0,B.jsx)("h3",{children:"Description"})})}),(0,B.jsx)("div",{className:"grid",children:(0,B.jsx)("div",{className:"col-12",children:(0,B.jsx)(N.g,{name:"description",value:_.description,onChange:Ve,style:{width:280},autoResize:!0})})})]}),(0,B.jsxs)(u.Z,{children:[(0,B.jsxs)("div",{className:"grid",children:[(0,B.jsx)("div",{className:"col text-left",children:(0,B.jsx)("h3",{children:"Items"})}),(0,B.jsx)("div",{className:"col text-right",children:(0,B.jsx)(h.z,{icon:"pi pi-plus",className:"p-button-rounded p-button-outlined",tooltip:"Add Invoice Item",onClick:function(){X(!0);var e={id:(0,L.Z)(),quantity:1,discountType:"",discount:0,tax:0,total:0,taxes:[]},i=0,s=0;if(ge&&ge.length>0){var n=ge[0];e.productId=n.id,e.listPrice=n.unitPrice||0,e.purchaseCost=(n.purchaseCost||0)*(e.quantity||0),n.currencyId!==_.currencyId&&(e.listPrice=(0,R.Nh)(n.currencyId||"",_.currencyId||"",e.listPrice,Fe),e.purchaseCost=(0,R.Nh)(n.currencyId||"",_.currencyId||"",e.purchaseCost,Fe)),e.taxes=(0,l.Z)(n.taxes||[]),i=e.listPrice,s=0,e.taxes.length>0&&(e.taxes.forEach((function(e){s+=i*(e.value||0)/100})),e.tax=s),e.total=i}var d=(_.subTotal||0)+i,c=(_.taxTotal||0)+s,t=d+c,r=[].concat((0,l.Z)(_.items||[]),[e]);H((0,a.Z)((0,a.Z)({},_),{},{subTotal:d,taxTotal:c,total:t,items:r}))}})})]}),(0,B.jsx)("div",{className:"grid",children:(0,B.jsx)("div",{className:"col-12",children:(0,B.jsxs)(v.w,{value:_.items,editMode:"row",dataKey:"id",onRowEditComplete:function(e){X(!0);var i=e.newData,s=e.index,n=e.data,d=i;d.discount=n.discount||0;var c=(d.listPrice||0)*(d.quantity||0);switch(d.discountType){case"%":c-=c*(d.discount||0)/100;break;case"$":c-=d.discount||0;break;default:d.discount=0}d.total=c;var t=0,r=ge.find((function(e){return e.id===d.productId}));r&&(d.purchaseCost=(r.purchaseCost||0)*(d.quantity||0),d.taxes=(0,l.Z)(r.taxes||[]),d.taxes.length>0&&(d.taxes.forEach((function(e){t+=c*(e.value||0)/100})),d.tax=t));var o=c,h=t,u=0;_.items&&(_.items.forEach((function(e){e.id!==d.id&&(o+=e.total||0,h+=e.tax||0)})),u=o+h);var x=(0,l.Z)(_.items||[]);x[s]=d,H((0,a.Z)((0,a.Z)({},_),{},{subTotal:o,taxTotal:h,total:u,items:x}))},reorderableRows:!0,onRowReorder:function(e){X(!0),H((0,a.Z)((0,a.Z)({},_),{},{items:e.value}))},footer:Qe,children:[(0,B.jsx)(m.s,{rowReorder:!0,style:{width:"3em"}}),(0,B.jsx)(m.s,{field:"productId",header:"Item Name",body:function(e){var i=Le.find((function(i){return i.id===e.productId}));return null===i||void 0===i?void 0:i.name},editor:function(e){return $e(e)}}),(0,B.jsx)(m.s,{field:"comment",header:"Comment",editor:function(e){return function(e){return(0,B.jsx)(g.o,{value:e.value,onChange:function(i){return e.editorCallback(i.target.value)}})}(e)}}),(0,B.jsx)(m.s,{field:"quantity",header:"Quantity",editor:function(e){return Me(e)}}),(0,B.jsx)(m.s,{field:"listPrice",header:"Selling Price",body:function(e){var i;return(0,B.jsx)("div",{className:"text-right",children:null===e||void 0===e||null===(i=e.listPrice)||void 0===i?void 0:i.toFixed(2)})},editor:function(e){return Me(e)}}),(0,B.jsx)(m.s,{field:"discountType",header:"Discount",body:function(e){return"".concat(null===e||void 0===e?void 0:e.discountType," ").concat(null===e||void 0===e?void 0:e.discount)},editor:function(e){return Ge(e)}}),(0,B.jsx)(m.s,{field:"total",header:"Total",body:function(e){var i;return(0,B.jsx)("div",{className:"text-right",children:null===e||void 0===e||null===(i=e.total)||void 0===i?void 0:i.toFixed(2)})}}),(0,B.jsx)(m.s,{rowEditor:!0,headerStyle:{minWidth:"2rem"},bodyStyle:{textAlign:"center"}}),(0,B.jsx)(m.s,{body:function(e){return(0,B.jsx)(B.Fragment,{children:(0,B.jsx)(h.z,{icon:"pi pi-trash",className:"p-row-editor-init p-link",tooltip:"Delete",onClick:function(){return Ye(e)}})})},style:{minWidth:"2rem",textAlign:"center"}})]})})})]}),(0,B.jsxs)("div",{className:"grid",children:[(0,B.jsx)("div",{className:"col-12",children:"\xa0"}),(0,B.jsxs)("div",{className:"col-12",children:[(0,B.jsx)(h.z,{icon:"pi pi-check",className:"p-button-rounded p-button-outlined",tooltip:"Save",disabled:!se,onClick:Je}),"\xa0 \xa0",(0,B.jsx)(h.z,{icon:"pi pi-times",className:"p-button-rounded p-button-outlined",tooltip:"Back to List",onClick:Ke}),"\xa0 \xa0",(0,B.jsx)(h.z,{icon:"pi pi-print",className:"p-button-rounded p-button-outlined",tooltip:"Print",onClick:Xe})]})]}),(0,B.jsx)(j.V,{visible:oe,style:{width:"450px"},header:"Confirm",modal:!0,footer:He,onHide:We,children:(0,B.jsxs)("div",{className:"confirmation-content",children:[(0,B.jsx)("i",{className:"pi pi-exclamation-triangle mr-3",style:{fontSize:"2rem"}}),(0,B.jsx)("strong",{children:"Are you sure you want to delete this item?"})]})})]}),(0,B.jsx)("div",{className:"p-hidden",children:(0,B.jsx)("div",{ref:Ce,children:(0,B.jsx)(z,{item:_,accounts:we,currencies:Fe,products:Le})})})]})}},3585:function(e,i,s){s.d(i,{$8:function(){return l},Hr:function(){return c},_1:function(){return a},oB:function(){return d},wQ:function(){return n}});var n="Something bad happened. Please try again later.",d="Email is invalid.",l="Confirm Password is required.",c="Please re-enter passwords. The passwords do not match.",a=" - Unless otherwise agreed in writing by the supplier all invoices are payable within thirty (30) days of the date of invoice, in the currency of the invoice, drawn on a bank based in the USA or by such other method as is agreed in advance by the Supplier.\n- All prices are not inclusive of VAT which shall be payable in addition by the Customer at the applicable rate."},3396:function(e,i,s){s.d(i,{$v:function(){return d},Ay:function(){return n},Gh:function(){return l}});var n=["Cold Call","Existing Customer","Self Generated","Employee","Partner","Public Relations","Direct Mail","Conference","Trade Show","Web Site","Word of mouth","Email","Campaign","Other"],d=[{value:"Zero Discount",icon:"fas fa-circle"},{value:"% Price",icon:"fas fa-percent"},{value:"Direct Price Reduction",icon:"fas fa-arrow-down"}],l=["Created","Approved","Delivered","Cancelled"]},8284:function(e,i,s){s.d(i,{A8:function(){return c},HN:function(){return n},Nh:function(){return a},YM:function(){return l},xN:function(){return d}});var n=/^([a-zA-Z0-9_\-+'])+(\.[a-zA-Z0-9_\-+']+)*@((([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,15}))\s*$/i,d=function(e){return e?new Date(e).toISOString():""},l=function(e){return e?new Date(e):void 0},c=function(e){var i=parseFloat(e);return isNaN(i)?void 0:i},a=function(e,i,s,n){var d=c(s);if(!d)return s;var l=n.find((function(i){return i.id===e}));return l&&l.conversionRate&&!isNaN(l.conversionRate)&&l.conversionRate>0&&(d/=l.conversionRate),(l=n.find((function(e){return e.id===i})))&&l.conversionRate&&!isNaN(l.conversionRate)&&l.conversionRate>0&&(d*=l.conversionRate),parseFloat(d.toFixed(2))}}}]);
//# sourceMappingURL=9541.4af2cb3e.chunk.js.map